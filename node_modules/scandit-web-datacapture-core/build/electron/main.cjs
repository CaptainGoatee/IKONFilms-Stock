var e,n=Object.defineProperty,t=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,r=Object.prototype.hasOwnProperty,p={};((e,t)=>{for(var a in t)n(e,a,{get:t[a],enumerable:!0})})(p,{register:()=>y,unregister:()=>u}),module.exports=(e=p,((e,p,o,s)=>{if(p&&"object"==typeof p||"function"==typeof p)for(let i of a(p))r.call(e,i)||i===o||n(e,i,{get:()=>p[i],enumerable:!(s=t(p,i))||s.enumerable});return e})(n({},"__esModule",{value:!0}),e));var o=String.fromCodePoint,s=(o.apply(String,[119,101,98,107,105,116,84,114,97,110,115,112,111,114,116,68,117,112,108,101,120,67,104,97,110,110,101,108]),o.apply(String,[53,65,41,124,75,47,108,120,50,48,115,62,66,60,107,57])),i=o.apply(String,[111,74,88,52,51,101,51,112,66,79,38,88,40,65,36,94]);function c(e,n){return async function(t,a){if(function(e,n){const t=new URL(e.url);return n.senderId===s&&"localhost"===t.hostname||""===t.hostname}(t.senderFrame,a))switch(a.type){case"get-license-key":if(null!=a.payload)try{const r=await async function(e,n){const{fs:t,crypto:a,path:r,app:p}=e,o=r.join(p.getAppPath(),n.licenseDataPath),s=await t.readFile(o);return a.publicDecrypt(n.publicKey,s).toString("utf8")}(e,{licenseDataPath:a.payload.licenseDataPath,publicKey:n});t.sender.send(i,{type:a.type,senderId:a.senderId,payload:{licenseKey:r??""}})}catch(e){t.sender.send(i,{type:a.type,senderId:a.senderId,payload:{error:e}})}break;case"get-app-info":try{const n=await async function(e){const{fs:n,path:t,app:a}=e;let r=process.cwd();a.isPackaged&&(r=a.getAppPath());const p=await n.readFile(t.join(r,"package.json"),"utf8"),o=JSON.parse(p);return{appId:o.build?.appId??o.appId,name:o.name,version:o.version}}(e);t.sender.send(i,{type:a.type,senderId:a.senderId,payload:{isPackaged:e.app.isPackaged,version:n.version??e.app.getVersion(),appName:n.name??e.app.getName(),appId:n.appId??""}})}catch(e){t.sender.send(i,{type:a.type,senderId:a.senderId,payload:{error:e}})}}}}var d=null,l=null;function y(e,n){l=e,d=c(e,n),l.ipcMain.on(i,d)}function u(){null!=d&&null!=l&&l.ipcMain.off(i,d)}