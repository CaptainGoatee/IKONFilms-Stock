var i=class{constructor(e,s,r){this.captureListenerSet=!1;this.coreEngine=e,this.Module=s,this.workerFunctions=r,this.setup();}sparkScanDidUpdateSession(e){this.workerFunctions.postMessage({type:"sparkScanDidUpdateSession",payload:JSON.parse(e.toJson())});}getSparkScanDeserializer(){return this.sparkScanDeserializer}setup(){let e=this.Module.SparkScanListener.extend("SparkScanListener",{didScan:(t,a,n)=>{this.sparkScanDidScan(a,n);},didUpdateSession:(t,a)=>{this.sparkScanDidUpdateSession(a);}}),s=this.Module.Feedback.extend("Feedback",{emit:()=>{this.successFeedback();}}),r=this.Module.SparkScanDeserializerListener.extend("SparkScanDeserializerListener",{onModeDeserializationFinished:(t,a)=>{this.captureListenerSet||(a.addListener(new e,1),a.setSuccessFeedback(new s),this.captureListenerSet=!0);},onModeDeserializationStarted(){},onSettingsDeserializationStarted(){},onSettingsDeserializationFinished(){}});this.sparkScanDeserializer=new this.Module.SparkScanDeserializer,this.sparkScanDeserializer.setListener(new r);}successFeedback(){this.workerFunctions.postMessage({type:"successFeedback"});}sparkScanDidScan(e,s){let r=this.coreEngine.convertToLoadableFrameData(s);this.workerFunctions.postMessage({type:"sparkScanDidScan",payload:{session:JSON.parse(e.toJson()),frameData:r}});}};

export { i as a };
