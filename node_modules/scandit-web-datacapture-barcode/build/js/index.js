export { a as barcodeCaptureLoader } from './chunks/chunk-BCCU5235.js';
export { a as ScanIntention } from './chunks/chunk-NH3EDXZZ.js';
export { a as TrackedBarcodeView } from './chunks/chunk-HBXNORZN.js';
export { b as BarcodeTrackingBasicOverlay, a as BarcodeTrackingBasicOverlayStyle } from './chunks/chunk-LIRKR4DY.js';
export { a as BarcodeTrackingScenario, b as BarcodeTrackingSettings } from './chunks/chunk-QWKPIAAP.js';
export { a as BarcodeCapture } from './chunks/chunk-GRR6J5AO.js';
export { a as BarcodeCaptureFeedback } from './chunks/chunk-JYVE7GVH.js';
export { b as BarcodeCaptureOverlay, a as BarcodeCaptureOverlayStyle } from './chunks/chunk-IIVOIMGD.js';
export { a as BarcodeCaptureSession } from './chunks/chunk-V57LJZQF.js';
export { a as LocalizedOnlyBarcode } from './chunks/chunk-WWIKNET4.js';
export { a as BarcodeCaptureSettings } from './chunks/chunk-V7O44VLZ.js';
export { a as BarcodeTracking } from './chunks/chunk-JNAOKD3Z.js';
export { a as BarcodeTrackingSession } from './chunks/chunk-XZVKYSGH.js';
export { a as TrackedBarcode } from './chunks/chunk-YUALNQ6J.js';
import { e } from './chunks/chunk-HMNY52A3.js';
export { e as Barcode, c as Checksum, d as CompositeFlag, b as CompositeType, a as Symbology } from './chunks/chunk-HMNY52A3.js';
export { a as StructuredAppendData } from './chunks/chunk-G57IY3DF.js';
export { a as EncodingRange } from './chunks/chunk-RF6I7CKZ.js';
import { b as b$1 } from './chunks/chunk-XX2IMSRJ.js';
export { a as SymbologyDescription } from './chunks/chunk-KBO3YYBN.js';
export { a as Range } from './chunks/chunk-7SWSAHI5.js';
export { a as SymbologySettings } from './chunks/chunk-LBAL6OCN.js';
export { a as BarcodeTrackingAdvancedOverlay } from './chunks/chunk-SG6UNNC5.js';
import { Sound, Vibration, CameraSettings, convertToPublicFrameData, Logger, RadiusLocationSelection, NumberWithUnit, Feedback, Color, BrowserHelper, DataCaptureView, Anchor, LogoStyle, Camera, FrameSourceState, TorchState, isCameraFrameSource, Point, Brush } from 'scandit-web-datacapture-core';

var X=class r{static fromJSON(e$1){let t=new r;return t.newlyRecognizedBarcodes=e$1.newlyRecognizedBarcodes.map(i=>e.fromJSON(i)),t.frameSequenceID=e$1.frameSequenceId,t}};var nt=class r{constructor(){this.type="sparkScan";this._isEnabled=!0;this._context=null;this.listeners=new Set;this.allowedRemainingWorkerMessages=new Set;this.workerMessageListener=this.onWorkerMessage.bind(this);}static get recommendedCameraSettings(){return new CameraSettings(b$1.SparkScan.CameraSettings.settings)}get context(){return this._context}static forSettings(e){let t=new r;return t.settings=e,t}isEnabled(){return this._isEnabled}async setEnabled(e){this._isEnabled=e,await this.notifyContext();}async applySettings(e){return this.settings=e,this.notifyContext()}addListener(e){this.listeners.add(e);}removeListener(e){this.listeners.delete(e);}toJSONObject(){return {type:this.type,enabled:this._isEnabled,settings:this.settings.toJSONObject()}}attachedToContext(e){this._context=e,this._context.subscribeToWorkerMessages(this.workerMessageListener);}async detachedFromContext(){var e;(e=this._context)==null||e.unsubscribeToWorkerMessages(this.workerMessageListener),this._context=null;}sendClearFrameDataRequest(e){queueMicrotask(()=>{var t;(t=this.context)==null||t.workerCommand("deleteFrameData",{frameId:e});});}async onDidScan(e){if(this.context==null)return;let t=X.fromJSON(e.payload.session),{frameData:i}=e.payload;if(!this._isEnabled){this.sendClearFrameDataRequest(i.frameId),this.allowedRemainingWorkerMessages.clear();return}this.allowedRemainingWorkerMessages.add("successFeedback");let n=[];for(let a of this.listeners)if(a.didScan)try{let o=a.didScan(this,t,convertToPublicFrameData(i,this.context));o instanceof Promise&&await o;}catch(o){n.push(o);}this.sendClearFrameDataRequest(i.frameId),this.allowedRemainingWorkerMessages.add("sparkScanDidUpdateSession");for(let a of n)Logger.log(Logger.Level.Error,a);}onDidUpdateSession(e){var i;let t=X.fromJSON(e.payload);if(!(!this._isEnabled&&!this.allowedRemainingWorkerMessages.has(e.type))){this.allowedRemainingWorkerMessages.delete(e.type);for(let n of this.listeners)(i=n.didUpdateSession)==null||i.call(n,this,t);}}async onWorkerMessage(e){switch(e.type){case"sparkScanDidScan":{this.onDidScan(e);break}case"sparkScanDidUpdateSession":{this.onDidUpdateSession(e);break}}}async notifyContext(){this.context&&await this.context.update();}};var Yt=(t=>(t.Default="default",t.Persistent="persistent",t))(Yt||{});var Ut=(t=>(t.Single="single",t.Continuous="continuous",t))(Ut||{});var at=class{constructor(e,t){this.scanningBehavior=e,this.previewBehavior=t;}},U=class r extends at{toJSONObject(){return {type:"default",scanningBehavior:this.scanningBehavior,previewBehavior:this.previewBehavior}}copyWith(e,t){return new r(e!=null?e:this.scanningBehavior,t!=null?t:this.previewBehavior)}changeMode(){return new G(this.scanningBehavior,this.previewBehavior)}},G=class r extends at{toJSONObject(){return {type:"target",scanningBehavior:this.scanningBehavior,previewBehavior:this.previewBehavior}}copyWith(e,t){return new r(e!=null?e:this.scanningBehavior,t!=null?t:this.previewBehavior)}changeMode(){return new U(this.scanningBehavior,this.previewBehavior)}};var Et=class{constructor(){this.codeDuplicateFilter=b$1.SparkScan.SparkScanSettings.codeDuplicateFilter;this.locationSelection=new RadiusLocationSelection(new NumberWithUnit(b$1.SparkScan.SparkScanSettings.locationSelection.radius,b$1.SparkScan.SparkScanSettings.locationSelection.unit));this.properties={};this.symbologies={};this.enableTargetModeHiddenProperties(1);}get enabledSymbologies(){return Object.keys(this.symbologies).filter(t=>{var i;return (i=this.symbologies[t])==null?void 0:i.isEnabled})}settingsForSymbology(e){if(!this.symbologies[e]){let t=b$1.SymbologySettings[e];t._symbology=e,this.symbologies[e]=t;}return this.symbologies[e]}setProperty(e,t){this.properties[e]=t;}getProperty(e){return this.properties[e]}enableSymbologies(e){for(let t of e)this.enableSymbology(t,!0);}enableSymbology(e,t){this.settingsForSymbology(e).isEnabled=t;}toJSONObject(){var i;let e={},t=Object.keys(this.symbologies);return {codeDuplicateFilter:this.codeDuplicateFilter,locationSelection:this.locationSelection.toJSONObject(),properties:{...this.properties},symbologies:t.reduce((n,a)=>{var f;let o=(f=this.symbologies[a])==null?void 0:f.toJSONObject();return o&&(n[a]=o),n},e),scanIntention:(i=this.scanIntention)!=null?i:null}}enableTargetModeHiddenProperties(e){var i;let t=(i={1:b$1.SparkScan.SparkScanSettings.hiddenProperties.zoom1x,2:b$1.SparkScan.SparkScanSettings.hiddenProperties.zoom2x}[e])!=null?i:{};for(let[n,a]of Object.entries(t))this.setProperty(n,a);}disableTargetModeHiddenProperties(){let e={...b$1.SparkScan.SparkScanSettings.hiddenProperties.zoom1x,...b$1.SparkScan.SparkScanSettings.hiddenProperties.zoom2x};for(let[t]of Object.entries(e))this.setProperty(t,void 0);}};var rt=class{constructor(){this.continuousModeDisabledMessage=null;this.continuousModeEnabledMessage=null;this.scanPausedMessage=null;this.targetModeDisabledMessage=null;this.targetModeEnabledMessage=null;this.toastBackgroundColor=null;this.toastEnabled=!0;this.toastTextColor=null;this.torchDisabledMessage=null;this.torchEnabledMessage=null;this.zoomedInMessage=null;this.zoomedOutMessage=null;}toJSONObject(){var e,t,i,n;return {continuousModeDisabledMessage:this.continuousModeDisabledMessage,continuousModeEnabledMessage:this.continuousModeEnabledMessage,scanPausedMessage:this.scanPausedMessage,toastBackgroundColor:(t=(e=this.toastBackgroundColor)==null?void 0:e.toJSON())!=null?t:null,toastEnabled:this.toastEnabled,toastTextColor:(n=(i=this.toastTextColor)==null?void 0:i.toJSON())!=null?n:null,torchDisabledMessage:this.torchDisabledMessage,torchEnabledMessage:this.torchEnabledMessage,zoomedInMessage:this.zoomedInMessage,zoomedOutMessage:this.zoomedOutMessage}}};var Gt="data:audio/mpeg;base64,SUQzBAAAAAACGFRFTkMAAAALAAADUHJvIFRvb2xzAFRYWFgAAAAjAAADb3JpZ2luYXRvcl9yZWZlcmVuY2UAYWE0RVEzWlo0Qk9rAFRJVDIAAAAeAAADMDhfU2NhbmRpdF9TcGFya1NjYW5fU3VjY2VzcwBUWFhYAAAASQAAA3VtaWQAMHgwNjBBMkIzNDAxMDEwMTA1MDEwMTBGMTAxMzAwMDAwMDg2RjhDRjNERUE3QjgwMDBFOEY5QzVERDdBNzc5ODE0AFRYWFgAAAAYAAADdGltZV9yZWZlcmVuY2UAMzEyOTE2NQBURFJDAAAADAAAAzIwMjMtMDMtMjQAVFNTRQAAAA8AAANMYXZmNTkuMTcuMTAxAAAAAAAAAAAAAAD/+1QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABJbmZvAAAADwAAABMAAAfgACQkJCQkMDAwMDA8PDw8PElJSUlJSVVVVVVVYWFhYWFtbW1tbXl5eXl5eYaGhoaGkpKSkpKenp6enqqqqqqqqra2tra2w8PDw8PPz8/Pz9vb29vb2+fn5+fn8/Pz8/P//////wAAAABMYXZjNTkuMjAAAAAAAAAAAAAAAAAkA4sAAAAAAAAH4Pz6QyH/+xRkAAAAYABVrQAAAAAADSCgAAEDxCNqGYEAAAAANIMAAAA0AAagwo5/EYfghBDVXFW+6QFh98moYw/8vpNwnRNcoHTa4ut+RUr3KvUqlRgDTAVglINLSy9knqE/17r/+xRkCIAA5AlYBmQgAAAADSDAAAAD7JVsGPKAAAAANIMAAADtT5CzDSpGdTr2/pyLLYmFC/M/afE1/9yMnjBv5hIV/HmX/0RwIf/9DuUfyQEHzWuFS9h2RQBK5xa1lpb/+xRkCIHw8BvZLz1AAAAADSDgAAEDhG1gAGFCwAAANIAAAAT/9AlGf//nCLFk49+SoJfyk+uZ3UiuYejGK//UDJL+Yrmf6iBN/icECCr0epokgARNPBcGJQ9VZLa//pP/+xRkCQHwziVagUBGEAAADSAAAAEENJFpoL1IiAAANIAAAARIBX/8qAeoLFroFtENA6JmA0xfimFPTSNLMrf879dwPOxE62yn//qIThUAaES0M2kAAI8IFwoNHsZtf+X/+xRkCQHw6yRe6AIpLAAADSAAAAEDgJFpoDyk0AAANIAAAAT/jSTMZm5m//6APSAKiHAKKDBiWhPt89iKByOf/9P/FZzoby///GUKAA0C2AOAAAEqs4wNvDwX/6j58BP/+xRkCgHwtghcaABALAAADSAAAAECRJFMBoBYQAAANIAAAAT/9qf/okwDKAFY+k////zIln+YCdEjgFuEae4//Jf/xKoAQAIAdHVVTEFNRTMuOTkuNVVVVVVVVVVVVVX/+xRkE4/wWwjMgAF6AAAADSAAAAEAAAEyAABAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+xRkK4/wMQBHICEYDAAADSAAAAEAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+xRkRg/wAABpAAAACAAADSAAAAEAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+xRkZA/wAABpAAAACAAADSAAAAEAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+xRkgg/wAABpAAAACAAADSAAAAEAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+xRkoA/wAABpAAAACAAADSAAAAEAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+xRkvg/wAABpAAAACAAADSAAAAEAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+xRk3A/wAABpAAAACAAADSAAAAEAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+xRk4Y/wAABpAAAACAAADSAAAAEAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+xRk4Y/wAABpAAAACAAADSAAAAEAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+xRk4Y/wAABpAAAACAAADSAAAAEAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+xRk4Y/wAABpAAAACAAADSAAAAEAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/+xRk4Y/wAABpAAAACAAADSAAAAEAAAGkAAAAIAAANIAAAARVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU=",_t="data:audio/mpeg;base64,SUQzBAAAAAACGFRFTkMAAAALAAADUHJvIFRvb2xzAFRYWFgAAAAjAAADb3JpZ2luYXRvcl9yZWZlcmVuY2UAYWE0RVFOcW9VQk9rAFRJVDIAAAAeAAADMDdfU2NhbmRpdF9TY2FubmVkLVdyb25nSXRlbQBUWFhYAAAASQAAA3VtaWQAMHgwNjBBMkIzNDAxMDEwMTA1MDEwMTBGMTAxMzAwMDAwMDg2RUUzOTA5RUE3QjgwMDBGNjZGQzVERDdBNzc5ODE0AFRYWFgAAAAYAAADdGltZV9yZWZlcmVuY2UAMjY3MDU5MABURFJDAAAADAAAAzIwMjMtMDMtMjQAVFNTRQAAAA8AAANMYXZmNTkuMTcuMTAxAAAAAAAAAAAAAAD/+1QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABJbmZvAAAADwAAABQAAAhAACIiIiIuLi4uLjo6Ojo6RUVFRUVRUVFRUV1dXV1daGhoaGh0dHR0dICAgICAi4uLi4uXl5eXl6KioqKirq6urq66urq6usXFxcXF0dHR0dHd3d3d3ejo6Ojo9PT09PT//////wAAAABMYXZjNTkuMjAAAAAAAAAAAAAAAAAkAsAAAAAAAAAIQBl5jwn/+xRkAAAAVgDUjQBgAAAADSCgAAEDiBduGIGACAAANIMAAAAgP8plFgg7znL+Q4k4B5uo2Rk9c+LQuOexRB4iCTT6t24x+9f7f/ve/OAAwiE0lTn2XHl6PVZxCA5GsdT/+xRkCoPwcwJexxhAAAAADSDgAAEBiAl0oJxAEAAANIAAAAQLpHM6PLpQzOOJP9g5lhihlyb2dlebf8JCDTyRW9i0P7qaz/+QAFBoW4NDEqQuutHr41//tAlwcSVBnm3/+xRkGwPwdwHbgCsQAAAADSAAAAEBlAd5AIhAAAAANIAAAATHiGz+Vc+PkABIAc4KvoFaqtnriqAiChQ15lfsMNqJ+6pCWSiwWiCplZ48GhwdztADJY5zm8nAqeDYITz/+xRkKwPweAReQCYQAAAADSAAAAEB5BF+gYhgKAAANIAAAARCDP8WxCCX+BeBTH3/iEEQWPLf/j9xbSKUgEEVL1p+0zaZlevKU5jbmwnBfkrWVYFOA8ttpVTjnZNQTAj/+xRkOYHwcAJeQCIYAAAADSAAAAEBwAd1AJhAAAAANIAAAAQh4cpNFFitO6uKSSRkaPEOmFCjhCufYvSYAMRykUrsTqSNnkFv2JqLbTWsOJFsnYRXo/r1z8r/7+mDiwH/+xRkSYAAdwLcJSQACAAADSCgAAEEeJFKGKUACAAANIMAAABxOtc6Jp53xlXP35AAcoV0pquMq1q/64ds9sxEh5Gt1gF6lGuqIWmtoDBY0qSi+FDRUEFIX0BPlJEDhYT/+xRkTgPxAxRZhzDAAAAADSDgAAEBlAl5AJhAAAAANIAAAATqelYAwIlAy0/IoV/EKh5Gw6UEDpn9pqpMQU1FqkxBTUUzLjk5LjWqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+xRkVYPweQJfIMkQCAAADSAAAAEBzAlyAJwAAAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqkxBTUUzLjk5LjWqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+xRkZIPwdAdgoEEYigAADSAAAAEB1AuEgQhAKAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqkxBTUUzLjk5LjWqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+xRkc4PwcAdewMEQoAAADSAAAAEBrAmCgQhgKAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqkxBTUUzLjk5LjWqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+xRkg4fwcgHcIMYICgAADSAAAAEBcA8wrGHgKAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqkxBTUUzLjk5LjWqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+xRklI/wTgLEAwkACgAADSAAAAEBWBTkBIxiaAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqkxBTUUzLjk5LjWqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+xRkqA/wAABpAAAACAAADSAAAAEAAAGkAAAAIAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+xRkxg/wAABpAAAACAAADSAAAAEAAAGkAAAAIAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+xRk4Y/wAABpAAAACAAADSAAAAEAAAGkAAAAIAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+xRk4Y/wAABpAAAACAAADSAAAAEAAAGkAAAAIAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+xRk4Y/wAABpAAAACAAADSAAAAEAAAGkAAAAIAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+xRk4Y/wAABpAAAACAAADSAAAAEAAAGkAAAAIAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+xRk4Y/wAABpAAAACAAADSAAAAEAAAGkAAAAIAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+xRk4Y/wAABpAAAACAAADSAAAAEAAAGkAAAAIAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqo=";var ot=new Sound(Gt),st=new Sound(_t);var I=class{constructor(e,t){this.visualFeedbackColor=e,this.feedback=t;}static defaultSuccessFeedback(){let e=Vibration.withPattern([300]);return new Feedback(e,ot)}static defaultErrorFeedback(){let e=Vibration.withPattern(b$1.SparkScan.SparkScanFeedback.errorVibrationPattern);return new Feedback(e,st)}static success(){return new q}},_=class extends I{constructor(t,i,n,a){super(n!=null?n:Color.fromRGBA(250,68,70,1),a!=null?a:I.defaultErrorFeedback());this.message=t,this.resumeCapturingDelay=i;}toJSONObject(){return {type:"error",barcodeFeedback:{feedback:this.feedback.toJSONObject(),message:this.message,resumeCapturingDelay:this.resumeCapturingDelay,visualFeedbackColor:this.visualFeedbackColor.toJSON()}}}},q=class extends I{constructor(t,i){super(t!=null?t:Color.fromRGBA(46,193,206,1),i!=null?i:I.defaultSuccessFeedback());}toJSONObject(){return {type:"success",barcodeFeedback:{visualFeedbackColor:this.visualFeedbackColor.toJSON(),feedback:this.feedback.toJSONObject()}}}};var Xt="collapsedtriggerbuttontap",Kt="expandedtriggerbuttontap",j="sidebarbuttontap";var te="holdend";var ee="holdstart",ie="tap",ne="orientationchange",xt="minipreviewbuttontap",ae="minipreviewswipeup",re="minipreviewswipedown";var ct=class ct{constructor(e,t){this.state="idle";this.pointerDownListener=this.onPointerDown.bind(this);this.pointerMoveListener=this.onPointerMove.bind(this);this.pointerUpListener=this.onPointerUp.bind(this);this.element=e,this.holdEventsEnabled=t;}static forElement(e,t){return new ct(e,t)}connect(){this.element.addEventListener("collapsedtriggerbuttontap",this.pointerDownListener),this.element.addEventListener("expandedtriggerbuttontap",this.pointerDownListener),this.element.addEventListener("pointermove",this.pointerMoveListener),this.element.addEventListener("pointerup",this.pointerUpListener);}disconnect(){this.element.removeEventListener("collapsedtriggerbuttontap",this.pointerDownListener),this.element.removeEventListener("expandedtriggerbuttontap",this.pointerDownListener),this.element.removeEventListener("pointermove",this.pointerMoveListener),this.element.removeEventListener("pointerup",this.pointerUpListener);}getAxisForTranslation(e,t){if(e>20&&e>t)return "x";if(t>20&&t>e)return "y"}getDirectionForAxisX(e,t){if(t.clientX<e.clientX)return "left";if(t.clientX>e.clientX)return "right"}getDirectionForAxisY(e,t){if(t.clientY<e.clientY)return "up";if(t.clientY>e.clientY)return "down"}getDirectionForAxis(e,t,i){return {x:this.getDirectionForAxisX(t,i),y:this.getDirectionForAxisY(t,i)}[e]}getEventForStateAndDirection(e,t){return {idle:void 0,tapped:new CustomEvent(ie),held:new CustomEvent(te),swiped:t?new CustomEvent(`swipe${t}end`):void 0}[e]}onPointerDown(e){this.state="tapped",this.holdEventsEnabled&&(this.holdStartTimeout=setTimeout(()=>{this.state="held",this.element.dispatchEvent(new CustomEvent(ee));},ct.holdTimeoutDuration)),this.pointerDownEvent=new PointerEvent("pointerdown",{clientX:e.detail.clientX,clientY:e.detail.clientY});}onPointerMove(e){if(!this.pointerDownEvent||this.state==="held")return;let t=Math.abs(e.clientX-this.pointerDownEvent.clientX),i=Math.abs(e.clientY-this.pointerDownEvent.clientY),n=this.getAxisForTranslation(t,i);if(!n||this.currentAxis&&n!==this.currentAxis)return;this.currentAxis=n;let a=this.getDirectionForAxis(n,this.pointerDownEvent,e);if(a){if(this.currentDirection=a,clearTimeout(this.holdStartTimeout),this.state!=="swiped"){this.state="swiped",this.element.dispatchEvent(new CustomEvent(`swipe${a}start`,{detail:new Point(e.clientX,e.clientY)}));return}this.element.dispatchEvent(new CustomEvent(`swipe${a}`,{detail:new Point(e.clientX,e.clientY)}));}}onPointerUp(){let e=this.getEventForStateAndDirection(this.state,this.currentDirection);e&&(clearTimeout(this.holdStartTimeout),this.element.dispatchEvent(e),this.state="idle",this.holdStartTimeout=void 0,this.pointerDownEvent=void 0,this.currentAxis=void 0,this.currentDirection=void 0);}};ct.holdTimeoutDuration=300;var At=ct;var pt=class pt{constructor(e,t){this._running=!1;this.duration=e>pt.maxDurationAllowedByJSEngines?pt.maxDurationAllowedByJSEngines:e,this.callback=t;}get running(){return this._running}start(){this.stop(),this.timeout=setTimeout(()=>{this.callback(),this.stop();},this.duration),this._running=!0;}stop(){clearTimeout(this.timeout),this._running=!1;}};pt.maxDurationAllowedByJSEngines=2147483647;var k=pt;var P="zoom-factor",h="hand-mode",$="hand-mode-button-visible",w="haptic-enabled",H="haptic-mode-button-visible",v="left-hand-mode",B="scanning-behavior",z="scanning-behavior-button-visible",T="sound-enabled",N="sound-mode-button-visible",O="target-mode-button-visible",E="target-mode-enabled",F="torch-button-visible",M="torch-enabled",p="inline-style",R="zoom-switch-control-visible",J="preview-size-control-visible";var y="spark-scan-view-collapsed-trigger-button",d="spark-scan-view-expanded-trigger-button",S="spark-scan-view-icon",l="spark-scan-view-mini-preview",g="spark-scan-view-sidebar",lt="spark-scan-view",C="spark-scan-view-toast",b="spark-scan-view-trigger-button",K="spark-scan-view-visual-feedback";function m(r){for(let[e,t]of Object.entries(r))customElements.get(e)||customElements.define(e,t);}function u(r,...e){return r.reduce((t,i,n)=>{var o;let a=(o=e.at(n))!=null?o:"";return t+i+String(a)},"")}var x=class extends HTMLElement{constructor(){super(...arguments);this.icons={scanner:()=>u`
      <svg
        width="${this.size}"
        height="${this.heightForViewbox(32,32)}"
        viewBox="0 0 32 32"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M3.69858 5.22983C3.69858 4.55065 4.263 4.00006 4.95924 4.00006H10.055C10.7512 4.00006 11.3156 4.55065 11.3156 5.22983C11.3156 5.90902 10.7512 6.45961 10.055 6.45961H6.2199V10.2007C6.2199 10.8799 5.65549 11.4305 4.95924 11.4305C4.263 11.4305 3.69858 10.8799 3.69858 10.2007V5.22983ZM20.6844 5.22983C20.6844 4.55065 21.2488 4.00006 21.945 4.00006H27.0408C27.737 4.00006 28.3014 4.55065 28.3014 5.22983V10.2007C28.3014 10.8799 27.737 11.4305 27.0408 11.4305C26.3445 11.4305 25.7801 10.8799 25.7801 10.2007V6.45961H21.945C21.2488 6.45961 20.6844 5.90902 20.6844 5.22983ZM2 16.0001C2 15.3209 2.56442 14.7703 3.26066 14.7703H28.7393C29.4356 14.7703 30 15.3209 30 16.0001C30 16.6792 29.4356 17.2298 28.7393 17.2298H3.26066C2.56442 17.2298 2 16.6792 2 16.0001ZM4.95924 20.5696C5.65549 20.5696 6.2199 21.1202 6.2199 21.7994V25.5405H10.055C10.7512 25.5405 11.3156 26.0911 11.3156 26.7703C11.3156 27.4495 10.7512 28.0001 10.055 28.0001H4.95924C4.263 28.0001 3.69858 27.4495 3.69858 26.7703V21.7994C3.69858 21.1202 4.263 20.5696 4.95924 20.5696ZM27.0408 20.5696C27.737 20.5696 28.3014 21.1202 28.3014 21.7994V26.7703C28.3014 27.4495 27.737 28.0001 27.0408 28.0001H21.945C21.2488 28.0001 20.6844 27.4495 20.6844 26.7703C20.6844 26.0911 21.2488 25.5405 21.945 25.5405H25.7801V21.7994C25.7801 21.1202 26.3445 20.5696 27.0408 20.5696Z"
          fill="${this.fill}"
          style="${this[p]}"
        />
      </svg>
    `,expand:()=>u`
      <svg
        width="${this.size}"
        height="${this.heightForViewbox(14,14)}"
        viewBox="0 0 14 14"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M5.46232 7.53028C5.75521 7.23738 6.23008 7.23738 6.52298 7.53028C6.81587 7.82317 6.81587 8.29804 6.52298 8.59094L2.86397 12.2499H5.5C5.91421 12.2499 6.25 12.5857 6.25 12.9999C6.25 13.4142 5.91421 13.7499 5.5 13.7499H1C0.948223 13.7499 0.897672 13.7447 0.848849 13.7347C0.507086 13.6648 0.25 13.3624 0.25 12.9999V8.49995C0.25 8.08573 0.585786 7.74995 1 7.74995C1.41421 7.74995 1.75 8.08573 1.75 8.49995V11.2426L5.46232 7.53028Z"
          fill="${this.fill}"
          style="${this[p]}"
        />
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M8.84283 6.08313C8.54994 6.37602 8.07506 6.37602 7.78217 6.08313C7.48928 5.79023 7.48928 5.31536 7.78217 5.02246L11.0545 1.75017L8.5 1.75017C8.08579 1.75017 7.75 1.41439 7.75 1.00017C7.75 0.58596 8.08579 0.250174 8.5 0.250174L13 0.250174C13.4142 0.250174 13.75 0.58596 13.75 1.00017L13.75 5.50017C13.75 5.91439 13.4142 6.25017 13 6.25017C12.5858 6.25017 12.25 5.91439 12.25 5.50017L12.25 2.67596L8.84283 6.08313Z"
          fill="${this.fill}"
          style="${this[p]}"
        />
      </svg>
    `,shrink:()=>u`
      <svg
        width="${this.size}"
        height="${this.heightForViewbox(18,18)}"
        viewBox="0 0 18 18"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        style="${this[p]}"
      >
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M1.70694 17.7096C1.31642 18.1002 0.683255 18.1002 0.29273 17.7096C-0.0977935 17.3191 -0.0977935 16.6859 0.29273 16.2954L5.17662 11.4115L1.65674 11.4115C1.10445 11.4115 0.656738 10.9638 0.656738 10.4115C0.656738 9.85925 1.10445 9.41154 1.65674 9.41154L7.65674 9.41154C8.20902 9.41154 8.65674 9.85925 8.65674 10.4115C8.65674 10.4124 8.65674 10.4133 8.65674 10.4141C8.65674 10.415 8.65674 10.4159 8.65674 10.4167L8.65674 16.4167C8.65674 16.969 8.20902 17.4167 7.65674 17.4167C7.10445 17.4167 6.65674 16.969 6.65674 16.4167L6.65674 12.7598L1.70694 17.7096Z"
          fill="${this.fill}"
          style="${this[p]}"
        />
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M16.2929 0.290513C16.6834 -0.100011 17.3166 -0.100012 17.7071 0.290513C18.0976 0.681037 18.0976 1.3142 17.7071 1.70473L13.3388 6.07299L16.75 6.07299C17.3023 6.07299 17.75 6.5207 17.75 7.07299C17.75 7.62527 17.3023 8.07299 16.75 8.07299H10.75C10.1977 8.07299 9.75 7.62527 9.75 7.07299V1.07299C9.75 0.520705 10.1977 0.0729893 10.75 0.0729893C11.3023 0.0729893 11.75 0.520705 11.75 1.07299V4.83341L16.2929 0.290513Z"
          fill="${this.fill}"
          style="${this[p]}"
        />
      </svg>
    `,aimer:()=>u`
      <svg
        width="${this.size}"
        height="${this.heightForViewbox(24,24)}"
        viewBox="0 0 24 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M12 6.10352e-05C11.1716 6.10352e-05 10.5 0.671634 10.5 1.50006V6.50006C10.5 7.32849 11.1716 8.00006 12 8.00006C12.8284 8.00006 13.5 7.32849 13.5 6.50006V1.50006C13.5 0.671634 12.8284 6.10352e-05 12 6.10352e-05ZM16 11.5001C16 12.3285 16.6716 13.0001 17.5 13.0001H22.5C23.3284 13.0001 24 12.3285 24 11.5001C24 10.6716 23.3284 10.0001 22.5 10.0001H17.5C16.6716 10.0001 16 10.6716 16 11.5001ZM10.5 17.5001C10.5 16.6716 11.1716 16.0001 12 16.0001C12.8284 16.0001 13.5 16.6716 13.5 17.5001V22.5001C13.5 23.3285 12.8284 24.0001 12 24.0001C11.1716 24.0001 10.5 23.3285 10.5 22.5001V17.5001ZM0 11.5001C0 12.3285 0.671573 13.0001 1.5 13.0001H6.5C7.32843 13.0001 8 12.3285 8 11.5001C8 10.6716 7.32843 10.0001 6.5 10.0001H1.5C0.671573 10.0001 0 10.6716 0 11.5001Z"
          fill="${this.fill}"
          style="${this[p]}"
        />
      </svg>
    `,torchOff:()=>u`
      <svg
        width="${this.size}"
        height="${this.heightForViewbox(18,25)}"
        viewBox="0 0 18 25"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M5.99965 24.5001C5.85357 24.4995 5.70938 24.467 5.57725 24.4046C5.44513 24.3423 5.32828 24.2518 5.23496 24.1394C5.14164 24.027 5.07411 23.8955 5.03714 23.7541C5.00017 23.6128 4.99466 23.4651 5.02099 23.3214L6.80765 13.4987H2.00765C1.85299 13.5004 1.70007 13.4659 1.56102 13.3982C1.42197 13.3305 1.3006 13.2313 1.20654 13.1085C1.11248 12.9857 1.0483 12.8427 1.01911 12.6908C0.989907 12.5389 0.996486 12.3823 1.03832 12.2334L2.61432 6.45739L0.292987 4.13739C0.105391 3.9498 -2.7954e-09 3.69536 0 3.43006C2.79541e-09 3.16476 0.105391 2.91032 0.292987 2.72273C0.480584 2.53513 0.735019 2.42974 1.00032 2.42974C1.26562 2.42974 1.52006 2.53513 1.70765 2.72273L17.2637 18.2774C17.3619 18.3689 17.4407 18.4793 17.4954 18.602C17.55 18.7247 17.5794 18.8571 17.5818 18.9914C17.5841 19.1256 17.5594 19.259 17.5092 19.3835C17.4589 19.508 17.384 19.6212 17.289 19.7161C17.1941 19.8111 17.081 19.8859 16.9565 19.9362C16.8319 19.9865 16.6986 20.0112 16.5643 20.0089C16.43 20.0065 16.2976 19.9771 16.1749 19.9224C16.0523 19.8678 15.9419 19.789 15.8503 19.6907L12.1863 16.0281L6.83565 24.0534C6.74421 24.1913 6.61994 24.3043 6.47402 24.3822C6.3281 24.4602 6.1651 24.5007 5.99965 24.5001ZM14.4503 12.6334L3.82899 2.01206L4.04099 1.23873C4.0984 1.02666 4.22406 0.839402 4.39854 0.70589C4.57302 0.572378 4.78662 0.500042 5.00632 0.500061L11.9997 0.500061C12.1547 0.501379 12.3073 0.538102 12.446 0.607427C12.5846 0.676752 12.7056 0.776844 12.7997 0.900061C12.893 1.02388 12.9564 1.16772 12.9846 1.32021C13.0128 1.47271 13.0052 1.62968 12.9623 1.77873L11.333 7.50006H15.9997C16.1807 7.50033 16.3583 7.54963 16.5136 7.64271C16.6689 7.7358 16.7961 7.8692 16.8817 8.02876C16.9673 8.18832 17.0081 8.36808 16.9998 8.54895C16.9914 8.72983 16.9342 8.90506 16.8343 9.05606L14.453 12.6334H14.4503Z"
          fill="${this.fill}"
          style="${this[p]}"
        />
      </svg>
    `,torchOn:()=>u`
      <svg
        width="${this.size}"
        height="${this.heightForViewbox(16,25)}"
        viewBox="0 0 16 25"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M15.0072 7.00265H10.3321L11.9687 1.27515C12.0113 1.12618 12.0187 0.969359 11.9903 0.817052C11.9619 0.664746 11.8985 0.521115 11.8051 0.397482C11.7118 0.273849 11.5909 0.173593 11.4522 0.104616C11.3135 0.0356387 11.1606 -0.000174023 11.0057 6.35801e-07H4.00306C3.78345 -9.74579e-05 3.5699 0.0720732 3.39538 0.205378C3.22085 0.338682 3.09504 0.525713 3.03736 0.737613L0.0362252 11.7378C-0.00491183 11.8864 -0.0111074 12.0426 0.0181227 12.1941C0.0473529 12.3456 0.111217 12.4882 0.204723 12.6109C0.298228 12.7336 0.418842 12.833 0.557137 12.9014C0.695432 12.9697 0.84766 13.0052 1.00192 13.0049H5.80374L4.01906 22.83C3.97674 23.0569 4.01421 23.2915 4.12511 23.494C4.23602 23.6964 4.41353 23.8543 4.62756 23.9408C4.84158 24.0273 5.07894 24.0372 5.29939 23.9687C5.51984 23.9002 5.70981 23.7575 5.83708 23.5649L15.8409 8.55924C15.9417 8.40847 15.9997 8.23313 16.0085 8.05196C16.0174 7.87079 15.9769 7.69062 15.8912 7.53073C15.8056 7.37083 15.6781 7.23723 15.5224 7.14421C15.3667 7.05119 15.1886 7.00226 15.0072 7.00265Z"
          fill="${this.fill}"
          style="${this[p]}"
        />
      </svg>
    `,handle:()=>u`
      <svg
        width="${this.size}"
        height="${this.heightForViewbox(14,6)}"
        viewBox="0 0 14 6"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <circle cx="1" cy="1" r="1" fill="${this.fill}" style="${this[p]}" />
        <circle cx="5" cy="1" r="1" fill="${this.fill}" style="${this[p]}" />
        <circle cx="9" cy="1" r="1" fill="${this.fill}" style="${this[p]}" />
        <circle cx="13" cy="1" r="1" fill="${this.fill}" style="${this[p]}" />
        <circle cx="1" cy="5" r="1" fill="${this.fill}" style="${this[p]}" />
        <circle cx="5" cy="5" r="1" fill="${this.fill}" style="${this[p]}" />
        <circle cx="9" cy="5" r="1" fill="${this.fill}" style="${this[p]}" />
        <circle cx="13" cy="5" r="1" fill="${this.fill}" style="${this[p]}" />
      </svg>
    `,continuous:()=>u`
      <svg
        width="${this.size}"
        height="${this.heightForViewbox(32,32)}"
        viewBox="0 0 32 32"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M7.42499 3.93896C5.21585 3.93896 3.42499 5.72983 3.42499 7.93896V11.2723C3.42499 12.0087 4.02194 12.6056 4.75832 12.6056C5.4947 12.6056 6.09165 12.0087 6.09165 11.2723V7.93896C6.09165 7.20259 6.68861 6.60563 7.42499 6.60563H23.425C24.1614 6.60563 24.7583 7.20259 24.7583 7.93896V11.7876H22.8274C22.2742 11.7876 21.9617 12.4225 22.2991 12.8609L25.5634 17.1013C25.8303 17.448 26.3531 17.448 26.62 17.1013L29.8843 12.8609C30.2217 12.4225 29.9092 11.7876 29.356 11.7876H27.425V7.93896C27.425 5.72983 25.6341 3.93896 23.425 3.93896H7.42499Z"
          fill="${this.fill}"
          style="${this[p]}"
        />
        <path
          d="M23.5988 28.0001C25.808 28.0001 27.5988 26.2093 27.5988 24.0001V20.6668C27.5988 19.9304 27.0019 19.3335 26.2655 19.3335C25.5291 19.3335 24.9321 19.9304 24.9321 20.6668V24.0001C24.9321 24.7365 24.3352 25.3335 23.5988 25.3335L7.59882 25.3335C6.86244 25.3335 6.26548 24.7365 6.26548 24.0001L6.26548 19.3335H8.19646C8.74969 19.3335 9.06219 18.6985 8.72473 18.2601L5.46045 14.0197C5.19358 13.673 4.67078 13.673 4.40391 14.0197L1.13962 18.2601C0.802159 18.6985 1.11467 19.3335 1.66789 19.3335H3.59882L3.59882 24.0001C3.59882 26.2093 5.38968 28.0001 7.59882 28.0001L23.5988 28.0001Z"
          fill="${this.fill}"
          style="${this[p]}"
        />
        <path
          d="M12.6468 18.728C13.669 18.728 14.4697 18.2723 15.3942 17.133L15.4854 17.0288L15.5765 17.133C16.501 18.2723 17.3018 18.728 18.3239 18.728C19.9059 18.728 21.0843 17.5561 21.0843 16.0067V15.9936C21.0843 14.4442 19.9059 13.2723 18.3239 13.2723C17.3018 13.2723 16.501 13.7345 15.5765 14.8673L15.4854 14.978L15.3942 14.8673C14.4697 13.7345 13.669 13.2723 12.6468 13.2723C11.0648 13.2723 9.88641 14.4442 9.88641 15.9936V16.0067C9.88641 17.5561 11.0648 18.728 12.6468 18.728ZM12.738 17.3804C11.9242 17.3804 11.3447 16.8009 11.3447 16.0067V15.9936C11.3447 15.2059 11.9242 14.6199 12.738 14.6199C13.376 14.6199 13.8382 14.9585 14.5934 15.896L14.6781 16.0001L14.5934 16.1043C13.8382 17.0418 13.376 17.3804 12.738 17.3804ZM18.2328 17.3804C17.5947 17.3804 17.1325 17.0418 16.3773 16.1043L16.2927 16.0001L16.3773 15.896C17.1325 14.9585 17.5947 14.6199 18.2328 14.6199C19.0466 14.6199 19.626 15.2059 19.626 15.9936V16.0067C19.626 16.8009 19.0466 17.3804 18.2328 17.3804Z"
          fill="${this.fill}"
          style="${this[p]}"
        />
      </svg>
    `,soundOff:()=>u`
      <svg
        width="${this.size}"
        height="${this.heightForViewbox(32,32)}"
        viewBox="0 0 32 32"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M18.667 11.8386V6.66667H24.0003C24.7367 6.66667 25.3337 6.06971 25.3337 5.33333C25.3337 4.59695 24.7367 4 24.0003 4H18.667C17.2863 4 16.1507 5.04933 16.0141 6.39402C16.005 6.48366 16.0003 6.57462 16.0003 6.66667V9.1719L18.667 11.8386ZM18.667 14.667L16.0003 12.0003V17.0104C15.0469 16.3722 13.9004 16 12.667 16C9.35328 16 6.66699 18.6863 6.66699 22C6.66699 25.3137 9.35328 28 12.667 28C15.9807 28 18.667 25.3137 18.667 22C18.667 21.7747 18.6546 21.5522 18.6304 21.3333H18.667V14.667Z"
          fill="${this.fill}"
          style="${this[p]}"
        />
        <rect
          x="8"
          y="6.79999"
          width="2"
          height="24"
          rx="1"
          transform="rotate(-45 8 6.79999)"
          fill="${this.fill}"
          style="${this[p]}"
        />
      </svg>
    `,soundOn:()=>u`
      <svg
        width="${this.size}"
        height="${this.heightForViewbox(32,32)}"
        viewBox="0 0 32 32"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <g filter="url(#filter0_d_6879_6532)">
          <path
            d="M18.6665 6.66667V21.3333H18.6299C18.6541 21.5522 18.6665 21.7747 18.6665 22C18.6665 25.3137 15.9802 28 12.6665 28C9.3528 28 6.6665 25.3137 6.6665 22C6.6665 18.6863 9.3528 16 12.6665 16C13.8999 16 15.0464 16.3722 15.9998 17.0104V6.66667C15.9998 6.57462 16.0045 6.48366 16.0136 6.39402C16.1502 5.04933 17.2858 4 18.6665 4H23.9998C24.7362 4 25.3332 4.59695 25.3332 5.33333C25.3332 6.06971 24.7362 6.66667 23.9998 6.66667H18.6665Z"
            fill="${this.fill}"
            style="${this[p]}"
          />
        </g>
        <defs>
          <filter
            id="filter0_d_6879_6532"
            x="0.666504"
            y="-2"
            width="30.6665"
            height="36"
            filterUnits="userSpaceOnUse"
            color-interpolation-filters="sRGB"
          >
            <feFlood flood-opacity="0" result="BackgroundImageFix" />
            <feColorMatrix
              in="SourceAlpha"
              type="matrix"
              values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
              result="hardAlpha"
            />
            <feOffset />
            <feGaussianBlur stdDeviation="3" />
            <feComposite in2="hardAlpha" operator="out" />
            <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0" />
            <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_6879_6532" />
            <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_6879_6532" result="shape" />
          </filter>
        </defs>
      </svg>
    `,hapticOff:()=>u`
      <svg
        width="${this.size}"
        height="${this.heightForViewbox(32,32)}"
        viewBox="0 0 32 32"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <rect x="6.5" y="11.7" width="2" height="24" rx="1" transform="rotate(-45 6.5 11.7)" fill="${this.fill}" />
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M11.3333 6C10.0447 6 9 7.04467 9 8.33333V8.60341C9.04247 8.63418 9.08306 8.66869 9.12132 8.70696L11 10.5856V8H21V20.5856L23 22.5856V8.33333C23 7.04467 21.9553 6 20.6667 6H16H11.3333ZM11 13.4141V25H21V23.4141L22.907 25.3211C22.6241 26.2912 21.7282 27 20.6667 27H11.3333C10.0447 27 9 25.9553 9 24.6667V11.4141L11 13.4141Z"
          fill="${this.fill}"
          style="${this[p]}"
        />
      </svg>
    `,hapticOn:()=>u`
      <svg
        width="${this.size}"
        height="${this.heightForViewbox(28,21)}"
        viewBox="0 0 28 21"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M9.33333 0C8.04467 0 7 1.04467 7 2.33333V18.6667C7 19.9553 8.04467 21 9.33333 21H18.6667C19.9553 21 21 19.9553 21 18.6667V2.33333C21 1.04467 19.9553 0 18.6667 0H14H9.33333ZM18.6667 2.33333H9.33333V18.6667H18.6667V2.33333Z"
          fill="${this.fill}"
          fill-rule="evenodd"
          clip-rule="evenodd"
          style="${this[p]}"
        />
        <path
          d="M4.66667 4.66667C5.311 4.66667 5.83333 5.189 5.83333 5.83333L5.83333 15.1667C5.83333 15.811 5.311 16.3333 4.66667 16.3333C4.02233 16.3333 3.5 15.811 3.5 15.1667L3.5 5.83333C3.5 5.189 4.02233 4.66667 4.66667 4.66667Z"
          fill="${this.fill}"
          style="${this[p]}"
        />
        <path
          d="M24.5 5.83333C24.5 5.189 23.9777 4.66667 23.3333 4.66667C22.689 4.66667 22.1667 5.189 22.1667 5.83333V15.1667C22.1667 15.811 22.689 16.3333 23.3333 16.3333C23.9777 16.3333 24.5 15.811 24.5 15.1667V5.83333Z"
          fill="${this.fill}"
          style="${this[p]}"
        />
        <path
          d="M1.16667 7C1.811 7 2.33333 7.52233 2.33333 8.16667L2.33333 12.8333C2.33333 13.4777 1.811 14 1.16667 14C0.522334 14 0 13.4777 0 12.8333V8.16667C0 7.52233 0.522334 7 1.16667 7Z"
          fill="${this.fill}"
          style="${this[p]}"
        />
        <path
          d="M28 8.16667C28 7.52233 27.4777 7 26.8333 7C26.189 7 25.6667 7.52233 25.6667 8.16667V12.8333C25.6667 13.4777 26.189 14 26.8333 14C27.4777 14 28 13.4777 28 12.8333V8.16667Z"
          fill="${this.fill}"
          style="${this[p]}"
        />
      </svg>
    `,hand:()=>u`
      <svg
        width="${this.size}"
        height="${this.heightForViewbox(21,22)}"
        viewBox="0 0 21 22"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M13.755 2.00146V13.2355C13.7551 13.4125 13.8021 13.5863 13.8913 13.7392C13.9804 13.892 14.1086 14.0185 14.2627 14.1057C14.4167 14.1928 14.5911 14.2375 14.7681 14.2352C14.9451 14.2329 15.1183 14.1836 15.27 14.0925L17.699 12.6355C18.1063 12.3911 18.5889 12.304 19.0559 12.3908C19.5229 12.4776 19.942 12.7322 20.2343 13.1066C20.5266 13.481 20.6718 13.9494 20.6427 14.4235C20.6135 14.8976 20.412 15.3447 20.076 15.6805L13.755 22.0015H2.06203C2.06203 22.0015 2.67029e-05 13.2015 2.67029e-05 8.56147C0.0222702 8.2407 0.155342 7.93765 0.376455 7.70422C0.597569 7.47079 0.892963 7.32149 1.21205 7.2819C1.53113 7.24231 1.85406 7.31489 2.12551 7.48721C2.39697 7.65953 2.60007 7.92087 2.70003 8.22647C2.76097 7.79069 2.97607 7.39119 3.3063 7.1004C3.63654 6.80961 4.06004 6.64679 4.50003 6.64146C4.84812 6.63548 5.19001 6.73406 5.48149 6.92446C5.77296 7.11485 6.00062 7.38831 6.13502 7.70947C6.13502 7.70947 6.43003 6.00146 7.87803 6.00146C8.3022 5.96965 8.72386 6.08966 9.0677 6.34008C9.41154 6.59049 9.65515 6.95499 9.75502 7.36846V2.10847C9.74423 1.62161 9.905 1.14647 10.2092 0.766214C10.5134 0.385954 10.9417 0.124802 11.419 0.0284653C11.7061 -0.0204563 12.0004 -0.00610352 12.2813 0.0705242C12.5622 0.147152 12.8231 0.284203 13.0455 0.472101C13.268 0.66 13.4468 0.894211 13.5693 1.15837C13.6918 1.42253 13.7552 1.71026 13.755 2.00146Z"
          fill="${this.fill}"
          style="${this[p]}"
        />
      </svg>
    `};}get icon(){var t;return (t=this.getAttribute("icon"))!=null?t:"scanner"}set icon(t){this.setAttribute("icon",t);}get fill(){var t;return (t=this.getAttribute("fill"))!=null?t:"black"}set fill(t){this.setAttribute("fill",t);}get size(){var t;return Number((t=this.getAttribute("size"))!=null?t:"32")}set size(t){this.setAttribute("size",t.toString());}get[p](){return this.getAttribute(p)}set[p](t){t==null?this.removeAttribute(p):this.setAttribute(p,t);}static create(){return m({[S]:this}),document.createElement(S)}render(){this.innerHTML=u`
      ${this.icons[this.icon]()}

      <style>
        ${S} {
          display: flex;
        }
      </style>
    `;}aspectRatioForViewbox(t,i){return i/t}heightForViewbox(t,i){return this.size*this.aspectRatioForViewbox(t,i)}connectedCallback(){this.render();}attributeChangedCallback(t,i,n){n!==i&&this.render();}};x.observedAttributes=["icon","fill","size",p];var ut=class extends HTMLElement{get type(){var t;return (t=this.getAttribute("type"))!=null?t:"info"}set type(t){this.setAttribute("type",t);}get message(){var t;return (t=this.getAttribute("message"))!=null?t:""}set message(t){this.setAttribute("message",t);}get visible(){return this.hasAttribute("visible")}set visible(t){this.toggleAttribute("visible",t);}static create(){return m({[C]:this}),document.createElement(C)}show(t,i,n){this.hide(),this.type=t,this.message=i,this.visible=!0,this.timeout=new k(n,this.hide.bind(this)),this.timeout.start();}hide(){var t;(t=this.timeout)==null||t.stop(),this.visible=!1;}render(){this.innerHTML=u`
      <div class="${C} ${C}--${this.type}">${this.message}</div>

      <style>
        ${C} {
          width: fit-content;
          min-width: calc(100% - 32px);
          opacity: 0;
          transition: 0.3s ease;
          user-select: none;
        }

        ${C}[visible] {
          opacity: 1;
        }

        .${C} {
          width: fit-content;
          padding: 8px 12px;
          margin: 0 auto;
          border-radius: 4px;
          font-family: sans-serif;
          font-size: 14px;
          font-weight: 500;
        }

        .${C}--${"info"} {
          background: rgba(255, 255, 255, 1);
        }

        .${C}--${"warning"} {
          background: rgba(251, 192, 44, 1);
        }

        .${C}--${"error"} {
          background: rgba(250, 68, 70, 1);
          color: white;
        }
      </style>
    `;}connectedCallback(){this.render();}disconnectedCallback(){this.hide();}attributeChangedCallback(t,i,n){n!==i&&this.render();}};ut.observedAttributes=["type","message"];var Ae=1200,dt=class extends HTMLElement{constructor(){super(...arguments);this.swiping=!1;this.resizeButtonTapListener=this.onResizeButtonTap.bind(this);this.zoomButtonTapListener=this.onZoomButtonTap.bind(this);this.pointerDownListener=this.onPointerDown.bind(this);this.pointerMoveListener=this.onPointerMove.bind(this);this.pointerUpListener=this.onPointerUp.bind(this);this.fadeOutAnimation=new Animation(new KeyframeEffect(this,[{opacity:1},{opacity:0}],{duration:500,fill:"both"}));this.replayFadeOutTimeout=null;this.viewportFitCoverEnabled=!1;}get visible(){return this.hasAttribute("visible")}set visible(t){this.toggleAttribute("visible",t);}get expanded(){return this.hasAttribute("expanded")}set expanded(t){this.toggleAttribute("expanded",t);}get[P](){var t;return Number((t=this.getAttribute(P))!=null?t:"1")}set[P](t){this.setAttribute(P,String(t));}get darkened(){return this.hasAttribute("darkened")}set darkened(t){this.toggleAttribute("darkened",t);}get orientation(){var t;return (t=this.getAttribute("orientation"))!=null?t:"portrait-primary"}set orientation(t){this.setAttribute("orientation",t);}get[J](){return this.hasAttribute(J)}set[J](t){this.toggleAttribute(J,t);}get[R](){return this.hasAttribute(R)}set[R](t){this.toggleAttribute(R,t);}static create(){return m({[l]:this,[S]:x,[C]:ut}),document.createElement(l)}showToast(t,i,n){this.toast.show(t,i,n);}hideToast(){this.toast.hide();}zoomIn(){this.zoomButton&&(this[P]=2,this.zoomButton.textContent="2x",this.showToast("warning","2x zoom",1e3));}zoomOut(){this.zoomButton&&(this[P]=1,this.zoomButton.textContent="1x",this.showToast("info","1x zoom",1e3));}async fadeOut(){try{return this.fadeOutAnimation.play(),await this.fadeOutAnimation.finished,!0}catch(t){return !1}}cancelFadeOut(){var t;(t=this.replayFadeOutTimeout)==null||t.stop(),this.fadeOutAnimation.finish(),this.fadeOutAnimation.startTime=0,this.fadeOutAnimation.currentTime=0,this.fadeOutAnimation.pause();}async rewindAnimation(){var t,i,n;(((t=this.replayFadeOutTimeout)==null?void 0:t.running)===!0||this.fadeOutAnimation.playState==="running")&&((i=this.replayFadeOutTimeout)==null||i.stop(),this.fadeOutAnimation.finish(),this.fadeOutAnimation.startTime=0,this.fadeOutAnimation.currentTime=0,this.fadeOutAnimation.pause(),(n=this.replayFadeOutTimeout)==null||n.start());}render(){var t,i,n;this.innerHTML=u`
      <spark-scan-view-toast></spark-scan-view-toast>
      <div id="host"></div>
      <div class="${l}__button-container">
        ${this[J]?u`
              <button id="resizeButton" class="${l}__button">
                <spark-scan-view-icon icon="expand" fill="white" size="14"></spark-scan-view-icon>
              </button>
            `:""}
        ${this[R]?u`
              <button id="zoomButton" class="${l}__button">
                ${this[P]}x
              </button>
            `:""}
      </div>
      <div id="overlay"></div>

      <style>
        ${l} {
          position: fixed;
          top: calc(${this.viewportFitCoverEnabled?"env(safe-area-inset-top)":"0px"} + 16px);
          display: none;
          background: black;
          border-radius: 16px;
          box-shadow: 0 2px 6px 2px rgba(18, 22, 25, 0.15), 0 1px 2px 0 rgba(18, 22, 25, 0.3);
        }

        ${l}[orientation="portrait-primary"],
        ${l}[orientation="portrait-secondary"],
        ${l}[orientation="landscape-secondary"],
        ${l}[orientation="portrait-primary"] #overlay,
        ${l}[orientation="portrait-secondary"] #overlay,
        ${l}[orientation="landscape-secondary"] #overlay {
          right: calc(${this.viewportFitCoverEnabled?"env(safe-area-inset-right)":"0px"} + 16px);
        }

        ${l}[orientation="landscape-primary"],
        ${l}[orientation="landscape-primary"] #overlay {
          left: calc(${this.viewportFitCoverEnabled?"env(safe-area-inset-left)":"0px"} + 16px);
        }

        ${l},
        ${l} #overlay {
          width: 50dvw;
          height: 50dvw;
          min-width: 192px;
          min-height: 192px;
          max-width: min(250px, 50dvw);
          max-height: min(250px, 50dvw);
        }

        @media (orientation: landscape) {
          ${l},
          ${l} #overlay {
            width: 50dvh;
            height: 50dvh;
            max-width: min(250px, 50dvh);
            max-height: min(250px, 50dvh);
          }
        }

        @media screen (min-width: 768px) and (orientation: portrait) {
          ${l},
          ${l} #overlay {
            max-width: min(375px, 50dvw);
            max-height: min(375px, 50dvw);
          }
        }

        @media screen (min-width: 768px) and (orientation: landscape) {
          ${l},
          ${l} #overlay {
            max-width: min(375px, 50dvh);
            max-height: min(375px, 50dvh);
          }
        }

        ${l}[visible] {
          display: block;
        }

        ${l}[expanded],
        ${l}[expanded] #overlay {
          width: calc(100dvw - ${32}px);
          height: calc(50dvh - ${32}px);
          max-width: min(400px, calc(100dvw - ${32}px));
          max-height: min(400px, calc(50dvh - ${32}px));
        }

        @media (orientation: landscape) {
          ${l}[expanded],
          ${l}[expanded] #overlay {
            width: calc(50dvw - ${32}px);
            height: calc(100dvh - ${32}px);
            max-width: min(400px, calc(50dvw - ${32}px));
            max-height: min(400px, calc(100dvh - ${32}px));
          }
        }

        spark-scan-view-toast {
          position: absolute;
          top: 16px;
          left: 50%;
          transform: translateX(-50%);
          z-index: 20;
        }

        ${l} #host {
          width: 100%;
          height: 100%;
          border-radius: 16px;
        }

        ${l} #host * {
          width: 100%;
          height: 100%;
          border-radius: 16px;
        }

        .${l}__button-container {
          position: absolute;
          bottom: 0;
          display: flex;
          justify-content: space-between;
          box-sizing: border-box;
          width: 100%;
          padding: 12px;
        }

        .${l}__button {
          display: flex;
          justify-content: center;
          align-items: center;
          width: 24px;
          height: 24px;
          border: none;
          background: rgba(18, 22, 25, 0.5);
          color: white;
          font-family: Arial, Helvetica, sans-serif;
          font-size: 14px;
          font-weight: 500;
          border-radius: 50%;
        }

        ${l} #overlay {
          position: fixed;
          z-index: 10;
          top: 16px;
          right: 16px;
          background: black;
          border-radius: 16px;
          opacity: 0;
          transition: opacity 0.3s ease;
          pointer-events: none;
        }

        ${l}[darkened] #overlay {
          opacity: 0.3;
        }
      </style>
    `,this.toast=this.querySelector("spark-scan-view-toast"),this.host=this.querySelector("#host"),this.resizeButton=this.querySelector("#resizeButton"),(t=this.resizeButton)==null||t.addEventListener("pointerup",this.resizeButtonTapListener),this.resizeButtonIcon=(i=this.resizeButton)==null?void 0:i.querySelector("spark-scan-view-icon"),this.zoomButton=this.querySelector("#zoomButton"),(n=this.zoomButton)==null||n.addEventListener("pointerup",this.zoomButtonTapListener),this.overlay=this.querySelector("#overlay"),this.addEventListener("pointerdown",this.pointerDownListener),this.addEventListener("pointermove",this.pointerMoveListener),this.addEventListener("pointerup",this.pointerUpListener);}onResizeButtonTap(){this.expanded=!this.expanded,this.resizeButtonIcon&&(this.resizeButtonIcon.icon=this.expanded?"shrink":"expand"),this.dispatchEvent(new CustomEvent(xt,{detail:{tapped:"resizeButton",expanded:this.expanded}}));}onZoomButtonTap(){switch(this[P]){case 1:{this.zoomIn();break}case 2:{this.zoomOut();break}}this.dispatchEvent(new CustomEvent(xt,{detail:{tapped:"zoomButton",zoomFactor:this[P]}}));}onPointerDown(){this.rewindAnimation(),this.swiping=!0;}onPointerMove(t){if(!this.swiping)return;if(!this.previousPointerEvent){this.previousPointerEvent=t;return}if(!(Math.abs(t.clientY-this.previousPointerEvent.clientY)<20)){if(t.clientY<this.previousPointerEvent.clientY){this.previousPointerEvent=void 0,this.dispatchEvent(new CustomEvent(ae));return}t.clientY>this.previousPointerEvent.clientY&&(this.previousPointerEvent=void 0,this.dispatchEvent(new CustomEvent(re)));}}onPointerUp(){this.swiping=!1,this.previousPointerEvent=void 0;}getViewportFitCoverEnabled(){return [...document.head.querySelectorAll("meta")].some(t=>t.name==="viewport"&&t.content.includes("viewport-fit=cover"))}connectedCallback(){this.viewportFitCoverEnabled=this.getViewportFitCoverEnabled(),this.replayFadeOutTimeout=new k(Ae,()=>{this.fadeOutAnimation.play();}),this.render();}disconnectedCallback(){var t,i,n;(t=this.resizeButton)==null||t.removeEventListener("pointerup",this.resizeButtonTapListener),(i=this.zoomButton)==null||i.removeEventListener("pointerup",this.zoomButtonTapListener),this.removeEventListener("pointerdown",this.pointerDownListener),this.removeEventListener("pointermove",this.pointerMoveListener),this.removeEventListener("pointerup",this.pointerUpListener),this.fadeOutAnimation.cancel(),(n=this.replayFadeOutTimeout)==null||n.stop();}attributeChangedCallback(t,i,n){n!==i&&this.render();}};dt.observedAttributes=[J,R];var vt=class extends EventTarget{constructor(){super(...arguments);this.orientation="portrait-primary";this.landscapeOrientationMediaQuery=matchMedia("(orientation: landscape)");this.screenOrientationChangeListener=this.onScreenOrientationChange.bind(this);this.landscapeOrientationMediaQueryChangeListener=this.onLandscapeOrientationMediaQueryChange.bind(this);}connectedCallback(){this.isScreenOrientationApiSupported()?(screen.orientation.addEventListener("change",this.screenOrientationChangeListener),this.onScreenOrientationChange()):(this.landscapeOrientationMediaQuery.addEventListener("change",this.landscapeOrientationMediaQueryChangeListener),this.onLandscapeOrientationMediaQueryChange(new MediaQueryListEvent("change",{matches:this.landscapeOrientationMediaQuery.matches})));}disconnectedCallback(){this.isScreenOrientationApiSupported()?screen.orientation.removeEventListener("change",this.screenOrientationChangeListener):this.landscapeOrientationMediaQuery.removeEventListener("change",this.landscapeOrientationMediaQueryChangeListener);}isScreenOrientationApiSupported(){return typeof ScreenOrientation=="function"&&screen.orientation instanceof ScreenOrientation}dispatchOrientationChangeEvent(t){this.dispatchEvent(new CustomEvent(ne,{detail:t}));}onScreenOrientationChange(){this.orientation=screen.orientation.type,this.dispatchOrientationChangeEvent(this.orientation);}onLandscapeOrientationMediaQueryChange(t){let i=t;this.orientation=i.matches?"landscape-primary":"portrait-primary",this.dispatchOrientationChangeEvent(this.orientation);}};var wt=class r{constructor(){this.type="sparkScan";this._shouldShowScanAreaGuides=!1;this._shouldRemoveLocationsAfterScan=!0;this._shouldDrawViewfinder=!1;this._style=b$1.SparkScan.SparkScanOverlay.defaultStyle;this._viewfinder={type:"targetAimer",radius:{value:1,unit:"fraction"}};}get style(){return this._style}static async withSparkScanForView(e,t){let i=new r;return i.sparkScan=e,await i.setBrush(new Brush(b$1.SparkScan.SparkScanOverlay.DefaultBrush.fillColor,b$1.SparkScan.SparkScanOverlay.DefaultBrush.strokeColor,b$1.SparkScan.SparkScanOverlay.DefaultBrush.strokeWidth)),t&&await t.addOverlay(i),i}getBrush(){return this._brush}async setBrush(e){this._brush=e,await this.sparkScan.notifyContext();}async setShouldShowScanAreaGuides(e){this._shouldShowScanAreaGuides=e,await this.sparkScan.notifyContext();}async setShouldRemoveLocationsAfterScan(e){this._shouldRemoveLocationsAfterScan=e,await this.sparkScan.notifyContext();}async setShouldDrawViewfinder(e){this._shouldDrawViewfinder=e,await this.sparkScan.notifyContext();}shouldShowScanAreaGuides(){return this._shouldShowScanAreaGuides}shouldRemoveLocationsAfterScan(){return this._shouldRemoveLocationsAfterScan}toJSONObject(){return {type:this.type,brush:this._brush.toJSONObject(),shouldShowScanAreaGuides:this._shouldShowScanAreaGuides,shouldRemoveLocationsAfterScan:this._shouldRemoveLocationsAfterScan,viewfinder:this._viewfinder,style:this.style,shouldDrawViewfinder:this._shouldDrawViewfinder}}};var Lt=Vibration.withPattern([40]),qt=class r{constructor(e,t){this.soundEnabled=!0;this.hapticEnabled=!0;this.tapVibration=this.hapticEnabled?Lt:null;this.tapFeedback=new Feedback(this.tapVibration,null);this.successSound=this.soundEnabled?ot:null;this.successVibration=this.hapticEnabled?Lt:null;this.successFeedback=new Feedback(this.successVibration,this.successSound);this.errorSound=this.soundEnabled?st:null;this.noFeedback=new Feedback(null,null);this.errorVibration=this.hapticEnabled?Vibration.withPattern(b$1.SparkScan.SparkScanFeedback.errorVibrationPattern):null;this.errorFeedback=new Feedback(this.errorVibration,this.errorSound);this.soundEnabled=e,this.hapticEnabled=t;}static withDefaults(e,t){return new r(e,t)}setSoundEnabled(e){this.soundEnabled=e,this.successSound=e?ot:null,this.successFeedback=new Feedback(this.successVibration,this.successSound),this.errorSound=e?st:null,this.errorFeedback=new Feedback(this.errorVibration,this.errorSound);}setHapticEnabled(e){this.hapticEnabled=e,this.tapVibration=e?Lt:null,this.tapFeedback=new Feedback(this.tapVibration,null),this.successVibration=e?Vibration.defaultVibration:null,this.successFeedback=new Feedback(this.successVibration,this.successSound),this.errorVibration=e?Vibration.withPattern(b$1.SparkScan.SparkScanFeedback.errorVibrationPattern):null,this.errorFeedback=new Feedback(this.errorVibration,this.errorSound);}emitTapFeedback(){this.tapFeedback.emit();}emitBarcodeFeedback(e){var i,n;new Feedback(this.hapticEnabled&&(i=e==null?void 0:e.feedback.vibration)!=null?i:null,this.soundEnabled&&(n=e==null?void 0:e.feedback.sound)!=null?n:null).emit();}};var kt=class{constructor(e){this.storage=e;}get scanningBehavior(){return this.getItem("scanningBehavior")}set scanningBehavior(e){this.setItem("scanningBehavior",e);}get torchState(){return this.getItem("torchState")}set torchState(e){this.setItem("torchState",e);}get soundEnabled(){return this.getItem("soundEnabled")}set soundEnabled(e){this.setItem("soundEnabled",e);}get hapticEnabled(){return this.getItem("hapticEnabled")}set hapticEnabled(e){this.setItem("hapticEnabled",e);}get handMode(){return this.getItem("handMode")}set handMode(e){this.setItem("handMode",e);}get portraitOrientationTriggerButtonTranslateY(){return this.getItem("portraitOrientationTriggerButtonTranslateY")}set portraitOrientationTriggerButtonTranslateY(e){this.setItem("portraitOrientationTriggerButtonTranslateY",e);}get landscapeOrientationTriggerButtonTranslateY(){return this.getItem("landscapeOrientationTriggerButtonTranslateY")}set landscapeOrientationTriggerButtonTranslateY(e){this.setItem("landscapeOrientationTriggerButtonTranslateY",e);}getItem(e){let t=this.storage.getItem(e);if(t!=null)return JSON.parse(t)}setItem(e,t){this.storage.setItem(e,JSON.stringify(t));}};var Bt=class{constructor(e,t){this.holdingToScan=!1;this.viewSettings=e,this.preferenceManager=t,this.state="idle",this.scanningMode=e.defaultScanningMode.copyWith(t.scanningBehavior),this.zoomFactor=e.zoomFactorOut;}get targetModeEnabled(){return this.scanningMode instanceof G}get scanningBehavior(){return this.scanningMode.scanningBehavior}set scanningBehavior(e){this.scanningMode=this.scanningMode.copyWith(e);}get previewBehavior(){return this.scanningMode.previewBehavior}set previewBehavior(e){this.scanningMode=this.scanningMode.copyWith(this.scanningBehavior,e);}get torchState(){var e;return (e=this.preferenceManager.torchState)!=null?e:this.viewSettings.defaultTorchState}set torchState(e){this.preferenceManager.torchState=e;}get soundEnabled(){var e;return (e=this.preferenceManager.soundEnabled)!=null?e:this.viewSettings.soundEnabled}set soundEnabled(e){this.preferenceManager.soundEnabled=e;}get hapticEnabled(){var e;return (e=this.preferenceManager.hapticEnabled)!=null?e:this.viewSettings.hapticEnabled}set hapticEnabled(e){this.preferenceManager.hapticEnabled=e;}get handMode(){var e;return (e=this.preferenceManager.handMode)!=null?e:this.viewSettings.defaultHandMode}set handMode(e){this.preferenceManager.handMode=e;}get zoomedIn(){return this.zoomFactor===this.viewSettings.zoomFactorIn}get zoomedOut(){return this.zoomFactor===this.viewSettings.zoomFactorOut}get rightHandModeEnabled(){return this.handMode==="right"}get leftHandModeEnabled(){return this.handMode==="left"}get idleState(){return this.state==="idle"}get torchEnabled(){return this.torchState===TorchState.On}get continuousModeEnabled(){return this.scanningBehavior==="continuous"}get portraitOrientationTriggerButtonTranslateY(){return this.preferenceManager.portraitOrientationTriggerButtonTranslateY}set portraitOrientationTriggerButtonTranslateY(e){this.preferenceManager.portraitOrientationTriggerButtonTranslateY=e;}get landscapeOrientationTriggerButtonTranslateY(){return this.preferenceManager.landscapeOrientationTriggerButtonTranslateY}set landscapeOrientationTriggerButtonTranslateY(e){this.preferenceManager.landscapeOrientationTriggerButtonTranslateY=e;}};var Tt=class r{constructor(e,t,i,n){this.feedbackManager=qt.withDefaults(!0,!0);this.preferenceManager=new kt(localStorage);this.sparkScanView=e,this.context=t,this.sparkScan=i,this.sparkScanViewSettings=n,this.stateManager=new Bt(this.sparkScanViewSettings,this.preferenceManager),this.triggerButtonCollapseTimeout=new k(this.sparkScanViewSettings.triggerButtonCollapseTimeout,async()=>{this.stateManager.state!=="idle"&&await this.switchToIdleState();}),this.inactiveStateTimeout=new k(this.sparkScanViewSettings.inactiveStateTimeout,async()=>{this.stateManager.state!=="inactive"&&!this.stateManager.holdingToScan&&await this.switchToInactiveState();});}get handMode(){return this.stateManager.handMode}get portraitOrientationTriggerButtonTranslateY(){var e;return (e=this.stateManager.portraitOrientationTriggerButtonTranslateY)!=null?e:window.innerHeight/2}get landscapeOrientationTriggerButtonTranslateY(){var e;return (e=this.stateManager.landscapeOrientationTriggerButtonTranslateY)!=null?e:window.innerHeight/2}static forView(e,t,i,n){return new r(e,t,i,n)}async prepareScanning(e){this.context.addListener(this),this.dataCaptureView=await DataCaptureView.forContext(this.context),this.dataCaptureView.logoAnchor=Anchor.TopLeft,this.dataCaptureView.logoStyle=LogoStyle.Minimal,this.dataCaptureView.setHiddenProperty("stopVideoTracksOnVisibilityChange",!1),this.dataCaptureView.connectToElement(e),this.camera=Camera.default,await this.camera.applySettings(nt.recommendedCameraSettings),await this.context.setFrameSource(this.camera),await this.camera.switchToDesiredState(FrameSourceState.Standby),this.sparkScanView.setTorchAvailable(await this.camera.isTorchAvailable()),await this.context.addMode(this.sparkScan),this.sparkScan.addListener(this),this.sparkScanOverlay=await wt.withSparkScanForView(this.sparkScan,this.dataCaptureView),await this.sparkScanOverlay.setShouldRemoveLocationsAfterScan(this.stateManager.scanningBehavior==="continuous"),await this.applyPreferences();}async startScanning(){await this.switchToActiveState();}async pauseScanning(){await this.switchToInactiveState();}async stopScanning(){var e;await this.sparkScan.setEnabled(!1),this.sparkScan.removeListener(this),await((e=this.camera)==null?void 0:e.switchToDesiredState(FrameSourceState.Off)),await this.context.dispose(),this.dataCaptureView.detachFromElement(),this.context.removeListener(this),await this.context.dispose();}async onTriggerButtonTap(){switch(this.stateManager.state){case"idle":case"inactive":case"error":{await this.switchToActiveState(new q(Color.fromRGBA(0,0,0,0),this.feedbackManager.tapFeedback));return}case"active":await(this.stateManager.continuousModeEnabled?this.switchToInactiveState(new q(Color.fromRGBA(0,0,0,0),this.feedbackManager.tapFeedback)):this.switchToActiveState(new q(Color.fromRGBA(0,0,0,0),this.feedbackManager.tapFeedback)));}}async onTriggerButtonHoldStart(){var e;this.sparkScanViewSettings.holdToScanEnabled&&(this.scanningBehaviorCache=this.stateManager.scanningBehavior,this.stateManager.scanningBehavior="continuous",this.stateManager.holdingToScan=!0,await((e=this.sparkScanOverlay)==null?void 0:e.setShouldRemoveLocationsAfterScan(!0)),await this.switchToActiveState(new q(Color.fromRGBA(0,0,0,0),this.feedbackManager.tapFeedback)));}async onTriggerButtonHoldEnd(){var e,t;this.sparkScanViewSettings.holdToScanEnabled&&this.stateManager.state!=="error"&&(this.stateManager.scanningBehavior=(e=this.scanningBehaviorCache)!=null?e:"single",this.stateManager.holdingToScan=!1,await((t=this.sparkScanOverlay)==null?void 0:t.setShouldRemoveLocationsAfterScan(this.stateManager.continuousModeEnabled)),await this.switchToInactiveState(new _("",0,Color.fromRGBA(0,0,0,0),this.feedbackManager.tapFeedback)));}async onClickOutside(){this.stateManager.idleState||await this.switchToIdleState();}async onVisibilityChange(){await this.switchToIdleState();}async onTargetModeButtonTap(e,t=this.feedbackManager.tapFeedback,i=!0){var o;let n=String(e);(({true:e&&this.stateManager.scanningMode instanceof U,false:!e&&this.stateManager.scanningMode instanceof G}))[n]&&(this.stateManager.scanningMode=this.stateManager.scanningMode.changeMode()),this.enableTargetMode(e,this.stateManager.zoomFactor),await((o=this.sparkScanOverlay)==null?void 0:o.setShouldDrawViewfinder(e)),t.emit(),this.stateManager.state!=="idle"&&this.stateManager.state!=="error"&&(this.triggerButtonCollapseTimeout.start(),this.inactiveStateTimeout.start()),this.sparkScanView.targetModeButtonTapped(e,this.stateManager.scanningMode,i);}async onScanningBehaviorButtonTap(e,t=this.feedbackManager.tapFeedback,i=!0){var n;t.emit(),this.stateManager.scanningMode=this.stateManager.scanningMode.copyWith(e?"continuous":"single"),await((n=this.sparkScanOverlay)==null?void 0:n.setShouldRemoveLocationsAfterScan(e)),this.stateManager.state!=="idle"&&this.stateManager.state!=="error"&&(this.triggerButtonCollapseTimeout.start(),this.inactiveStateTimeout.start()),this.sparkScanView.scanningBehaviorButtonTapped(e,i);}async onTorchButtonTap(e,t=this.feedbackManager.tapFeedback,i=!0){var n;t.emit(),this.stateManager.torchState=e?TorchState.On:TorchState.Off,((n=this.camera)==null?void 0:n.getCurrentState())===FrameSourceState.On&&await this.camera.setDesiredTorchState(this.stateManager.torchState),this.stateManager.state!=="idle"&&this.stateManager.state!=="error"&&(this.triggerButtonCollapseTimeout.start(),this.inactiveStateTimeout.start()),this.sparkScanView.torchButtonTapped(e,i);}onSoundModeButtonTap(e,t=this.feedbackManager.tapFeedback){t.emit(),this.stateManager.soundEnabled=e,this.feedbackManager.setSoundEnabled(e),this.stateManager.state!=="idle"&&this.stateManager.state!=="error"&&(this.triggerButtonCollapseTimeout.start(),this.inactiveStateTimeout.start()),this.sparkScanView.soundModeButtonTapped(e);}onHapticModeButtonTap(e,t=this.feedbackManager.tapFeedback){this.stateManager.hapticEnabled=e,this.feedbackManager.setHapticEnabled(e),t.emit(),this.stateManager.state!=="idle"&&this.stateManager.state!=="error"&&(this.triggerButtonCollapseTimeout.start(),this.inactiveStateTimeout.start()),this.sparkScanView.hapticModeButtonTapped(e);}onHandModeButtonTap(e,t=this.feedbackManager.tapFeedback){this.stateManager.handMode=e?"left":"right",t.emit(),this.stateManager.state!=="idle"&&this.stateManager.state!=="error"&&(this.triggerButtonCollapseTimeout.start(),this.inactiveStateTimeout.start()),this.sparkScanView.handModeButtonTapped(e);}onMiniPreviewResizeButtonTap(){this.stateManager.state!=="idle"&&this.stateManager.state!=="error"&&(this.feedbackManager.emitTapFeedback(),this.triggerButtonCollapseTimeout.start(),this.inactiveStateTimeout.start());}async onMiniPreviewZoomButtonTap(e){this.feedbackManager.emitTapFeedback(),this.stateManager.zoomFactor=e,this.camera&&(this.camera.settings.zoomFactor=e,await this.camera.applySettings(this.camera.settings),await this.camera.setDesiredTorchState(this.stateManager.torchState)),this.stateManager.state!=="idle"&&this.stateManager.state!=="error"&&(this.triggerButtonCollapseTimeout.start(),this.inactiveStateTimeout.start()),this.enableTargetModeHiddenProperties(this.stateManager.targetModeEnabled,e);}async onMiniPreviewSwipeUp(){var e;this.stateManager.zoomedOut&&(this.stateManager.zoomFactor=this.sparkScanViewSettings.zoomFactorIn,this.camera&&(this.camera.settings.zoomFactor=this.stateManager.zoomFactor),await((e=this.camera)==null?void 0:e.applySettings(this.camera.settings)),this.enableTargetModeHiddenProperties(this.stateManager.targetModeEnabled,this.stateManager.zoomFactor),this.stateManager.state!=="idle"&&this.stateManager.state!=="error"&&(this.triggerButtonCollapseTimeout.start(),this.inactiveStateTimeout.start()),this.sparkScanView.miniPreviewSwipedUp());}async onMiniPreviewSwipeDown(){this.stateManager.zoomedIn&&(this.stateManager.zoomFactor=this.sparkScanViewSettings.zoomFactorOut,this.camera&&(this.camera.settings.zoomFactor=this.stateManager.zoomFactor,await this.camera.applySettings(this.camera.settings)),this.enableTargetModeHiddenProperties(this.stateManager.targetModeEnabled,this.stateManager.zoomFactor),this.stateManager.state!=="idle"&&this.stateManager.state!=="error"&&(this.triggerButtonCollapseTimeout.start(),this.inactiveStateTimeout.start()),this.sparkScanView.miniPreviewSwipedDown());}async onTriggerButtonSwipeLeft(){this.stateManager.rightHandModeEnabled&&this.stateManager.idleState&&await this.switchToInactiveState(new _("",0,Color.fromRGBA(0,0,0,0),this.feedbackManager.tapFeedback));}async onTriggerButtonSwipeRight(){this.stateManager.leftHandModeEnabled&&this.stateManager.idleState&&await this.switchToInactiveState(new _("",0,Color.fromRGBA(0,0,0,0),this.feedbackManager.tapFeedback));}onTriggerButtonVerticalSwipeEnd(e,t){switch(t){case"landscape-primary":case"landscape-secondary":{this.stateManager.landscapeOrientationTriggerButtonTranslateY=e;break}case"portrait-primary":case"portrait-secondary":this.stateManager.portraitOrientationTriggerButtonTranslateY=e;}this.stateManager.state!=="idle"&&this.stateManager.state!=="error"&&!this.stateManager.holdingToScan&&(this.triggerButtonCollapseTimeout.start(),this.inactiveStateTimeout.start());}async didScan(e,t){let i=this.sparkScanView.feedbackDelegate.getFeedbackForBarcode(t.newlyRecognizedBarcodes[0]);if(i instanceof _){await this.switchToErrorState(i);return}i instanceof q&&await(this.stateManager.continuousModeEnabled?this.switchToActiveState(i):this.switchToInactiveState(i));}didChangeFrameSource(e,t){var i;if(isCameraFrameSource(t))this.camera=t;else {let n=(i=t==null?void 0:t.toJSONObject().type)!=null?i:"unknown";Logger.log(Logger.Level.Warn,`SparkScanView instances require a camera frame source to work, but a frame source of type "${n}" was found.`);}}async switchToIdleState(){var e,t;this.feedbackManager.emitTapFeedback(),this.stateManager.state="idle",await this.sparkScan.setEnabled(!1),await((e=this.camera)==null?void 0:e.switchToDesiredState(FrameSourceState.Standby)),this.triggerButtonCollapseTimeout.stop(),this.inactiveStateTimeout.stop(),(t=this.resumeCapturingTimeout)==null||t.stop(),this.sparkScanView.switchToIdleState();}async switchToActiveState(e){var t,i,n,a;this.stateManager.state="active",await((t=this.camera)==null?void 0:t.switchToDesiredState(FrameSourceState.On)),await((i=this.camera)==null?void 0:i.setDesiredTorchState(this.stateManager.torchState)),await this.sparkScan.setEnabled(!0),await((n=this.sparkScanOverlay)==null?void 0:n.setShouldRemoveLocationsAfterScan(this.stateManager.continuousModeEnabled)),this.feedbackManager.emitBarcodeFeedback(e),this.stateManager.holdingToScan||(this.triggerButtonCollapseTimeout.start(),this.inactiveStateTimeout.start()),(a=this.resumeCapturingTimeout)==null||a.stop(),await this.sparkScanView.switchToActiveState(this.sparkScanViewSettings.visualFeedbackEnabled&&e instanceof q,this.stateManager.scanningBehavior,e==null?void 0:e.visualFeedbackColor);}async switchToInactiveState(e){var t,i,n;this.stateManager.state="inactive",await this.sparkScan.setEnabled(!1),await(e instanceof q&&this.stateManager.scanningMode.previewBehavior==="persistent"?(t=this.sparkScanOverlay)==null?void 0:t.setShouldRemoveLocationsAfterScan(!0):(i=this.camera)==null?void 0:i.switchToDesiredState(FrameSourceState.Standby)),this.feedbackManager.emitBarcodeFeedback(e),this.triggerButtonCollapseTimeout.start(),this.inactiveStateTimeout.stop(),(n=this.resumeCapturingTimeout)==null||n.stop(),await this.sparkScanView.switchToInactiveState(this.sparkScanViewSettings.visualFeedbackEnabled&&e instanceof q,this.stateManager.scanningBehavior,this.stateManager.previewBehavior,e==null?void 0:e.visualFeedbackColor);}async switchToErrorState(e){var i,n;e.resumeCapturingDelay>0&&(this.stateManager.state="error",this.stateManager.scanningBehavior="single",await this.sparkScan.setEnabled(!1),await((i=this.camera)==null?void 0:i.switchToDesiredState(FrameSourceState.Standby)),this.resumeCapturingTimeout=new k(e.resumeCapturingDelay,async()=>{this.stateManager.state!=="active"&&await this.switchToActiveState();}),this.resumeCapturingTimeout.start()),await((n=this.sparkScanOverlay)==null?void 0:n.setShouldRemoveLocationsAfterScan(e.resumeCapturingDelay===0)),this.feedbackManager.emitBarcodeFeedback(e),this.triggerButtonCollapseTimeout.start(),this.inactiveStateTimeout.stop(),await this.sparkScanView.switchToErrorState(e,this.sparkScanViewSettings.visualFeedbackEnabled);}enableTargetModeLocationSelection(e){let t=e?b$1.SparkScan.SparkScanSettings.targetModeLocationSelection.radius:b$1.SparkScan.SparkScanSettings.locationSelection.radius,i=e?b$1.SparkScan.SparkScanSettings.targetModeLocationSelection.unit:b$1.SparkScan.SparkScanSettings.locationSelection.unit;this.sparkScan.settings.locationSelection=new RadiusLocationSelection(new NumberWithUnit(t,i));}enableTargetModeScanIntention(e){this.sparkScan.settings.scanIntention=e?"manual":"smart";}enableTargetModeHiddenProperties(e,t){e?this.sparkScan.settings.enableTargetModeHiddenProperties(t===this.sparkScanViewSettings.zoomFactorOut?1:2):this.sparkScan.settings.disableTargetModeHiddenProperties();}enableTargetMode(e,t){this.enableTargetModeLocationSelection(e),this.enableTargetModeScanIntention(e),this.enableTargetModeHiddenProperties(e,t);}async applyPreferences(){await this.onTargetModeButtonTap(this.stateManager.targetModeEnabled,this.feedbackManager.noFeedback,!1),await this.onScanningBehaviorButtonTap(this.stateManager.continuousModeEnabled,this.feedbackManager.noFeedback,!1),await this.onTorchButtonTap(this.stateManager.torchEnabled,this.feedbackManager.noFeedback,!1),this.onSoundModeButtonTap(this.stateManager.soundEnabled,this.feedbackManager.noFeedback),this.onHapticModeButtonTap(this.stateManager.hapticEnabled,this.feedbackManager.noFeedback),this.onHandModeButtonTap(this.stateManager.leftHandModeEnabled,this.feedbackManager.noFeedback);}};var ht=class{constructor(){this.defaultHandMode=b$1.SparkScan.SparkScanViewSettings.defaultHandMode;this.defaultScanningMode=new U("single","default");this.defaultTorchState=b$1.SparkScan.SparkScanViewSettings.defaultTorchState;this.hapticEnabled=b$1.SparkScan.SparkScanViewSettings.hapticEnabled;this.holdToScanEnabled=b$1.SparkScan.SparkScanViewSettings.holdToScanEnabled;this.inactiveStateTimeout=b$1.SparkScan.SparkScanViewSettings.inactiveStateTimeout;this.soundEnabled=b$1.SparkScan.SparkScanViewSettings.soundEnabled;this.toastSettings=new rt;this.triggerButtonCollapseTimeout=b$1.SparkScan.SparkScanViewSettings.triggerButtonCollapseTimeout;this.visualFeedbackEnabled=b$1.SparkScan.SparkScanViewSettings.visualFeedbackEnabled;this.zoomFactorIn=b$1.SparkScan.SparkScanViewSettings.zoomFactorIn;this.zoomFactorOut=b$1.SparkScan.SparkScanViewSettings.zoomFactorOut;}toJSONObject(){return {defaultHandMode:this.defaultHandMode,defaultScanningMode:this.defaultScanningMode.toJSONObject(),defaultTorchState:this.defaultTorchState,hapticEnabled:this.hapticEnabled,holdToScanEnabled:this.holdToScanEnabled,inactiveStateTimeout:this.inactiveStateTimeout,soundEnabled:this.soundEnabled,toastSettings:this.toastSettings.toJSONObject(),triggerButtonCollapseTimeout:this.triggerButtonCollapseTimeout,visualFeedbackEnabled:this.visualFeedbackEnabled,zoomFactorIn:this.zoomFactorIn,zoomFactorOut:this.zoomFactorOut}}};var Q="--capture-button-background-color",gt="--capture-button-active-background-color",Y="--capture-button-tint-color",St="--toolbar-background-color",V="--toolbar-icon-active-tint-color",A="--toolbar-icon-inactive-tint-color",tt="--visual-feedback-success-color",bt="--visual-feedback-error-color";var mt=class extends HTMLElement{constructor(){super(...arguments);this.pointerDownListener=this.onPointerDown.bind(this);}static create(){return m({[y]:this,[S]:x}),document.createElement(y)}render(){this.innerHTML=u`
      <div class="${y}">
        <div class="${y}__icon">
          <spark-scan-view-icon
            id="scannerIcon"
            icon="scanner"
            inline-style="fill: var(${Y})"
            size="32"
          ></spark-scan-view-icon>
        </div>
      </div>

      <style>
        .${y} {
          width: 84px;
          height: 84px;
          padding: 6px;
          box-sizing: border-box;
          background: var(${Q});
          border-top-left-radius: 50%;
          border-bottom-left-radius: 50%;
          -webkit-user-select: none;
          -ms-user-select: none;
          user-select: none;
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: transparent;
        }

        .${y}__icon {
          display: flex;
          justify-content: center;
          align-items: center;
          width: 100%;
          height: 100%;
          background: rgba(18, 22, 25, 1);
          border-radius: 50%;
        }
      </style>
    `;}onPointerDown(t){this.dispatchEvent(new CustomEvent(Xt,{bubbles:!0,detail:{clientX:t.clientX,clientY:t.clientY}}));}connectedCallback(){this.render(),this.addEventListener("pointerdown",this.pointerDownListener);}disconnectedCallback(){this.removeEventListener("pointerdown",this.pointerDownListener);}};var Vt=class Vt extends HTMLElement{constructor(){super(...arguments);this.targetModeButtonTapListener=this.onTargetModeButtonTap.bind(this);this.scanningBehaviorButtonTapListener=this.onScanningBehaviorButtonTap.bind(this);this.torchButtonTapListener=this.onTorchButtonTap.bind(this);this.soundModeButtonTapListener=this.onSoundModeButtonTap.bind(this);this.hapticModeButtonTapListener=this.onHapticModeButtonTap.bind(this);this.handModeButtonTapListener=this.onHandModeButtonTap.bind(this);this.computedStyle=getComputedStyle(this);}get[O](){return this.hasAttribute(O)}set[O](t){this.toggleAttribute(O,t);}get[z](){return this.hasAttribute(z)}set[z](t){this.toggleAttribute(z,t);}get[F](){return this.hasAttribute(F)}set[F](t){this.toggleAttribute(F,t);}get[N](){return this.hasAttribute(N)}set[N](t){this.toggleAttribute(N,t);}get[H](){return this.hasAttribute(H)}set[H](t){this.toggleAttribute(H,t);}get[$](){return this.hasAttribute($)}set[$](t){this.toggleAttribute($,t);}get[E](){return this.hasAttribute(E)}set[E](t){this.toggleAttribute(E,t),this.targetModeButtonIcon&&(this.targetModeButtonIcon.fill=t?this.computedStyle.getPropertyValue(V):this.computedStyle.getPropertyValue(A));}get[B](){var t;return (t=this.getAttribute(B))!=null?t:"single"}set[B](t){this.setAttribute(B,t),this.scanningBehaviorButtonIcon&&(this.scanningBehaviorButtonIcon.fill=t==="continuous"?this.computedStyle.getPropertyValue(V):this.computedStyle.getPropertyValue(A));}get[M](){return this.hasAttribute(M)}set[M](t){this.toggleAttribute(M,t),this.torchButtonIcon&&(this.torchButtonIcon.icon=t?"torchOn":"torchOff",this.torchButtonIcon.fill=t?this.computedStyle.getPropertyValue(V):this.computedStyle.getPropertyValue(A),this.torchButtonIcon.size=t?16:17.58);}get[T](){return this.hasAttribute(T)}set[T](t){this.toggleAttribute(T,t),this.soundModeButtonIcon&&(this.soundModeButtonIcon.icon=t?"soundOn":"soundOff",this.soundModeButtonIcon.fill=t?this.computedStyle.getPropertyValue(V):this.computedStyle.getPropertyValue(A));}get[w](){return this.hasAttribute(w)}set[w](t){this.toggleAttribute(w,t),this.hapticModeButtonIcon&&(this.hapticModeButtonIcon.icon=t?"hapticOn":"hapticOff",this.hapticModeButtonIcon.fill=t?this.computedStyle.getPropertyValue(V):this.computedStyle.getPropertyValue(A));}get[h](){var t;return (t=this.getAttribute(h))!=null?t:"right"}set[h](t){this.handModeButtonIcon&&(this.handModeButtonIcon.fill=t==="left"?this.computedStyle.getPropertyValue(V):this.computedStyle.getPropertyValue(A)),this.setAttribute(h,t);}get allButtonsHidden(){return Vt.observedAttributes.every(t=>this[t]===!1)}get visibleButtonCount(){return Vt.observedAttributes.reduce((t,i)=>this[i]===!0?t+1:t,0)}static create(){return m({[g]:this,[S]:x}),document.createElement(g)}render(){var t,i,n,a,o,f,Dt,It,$t,Ht,zt,Nt;this.innerHTML=u`
      <div class="${g}">
        ${this[O]?u`
              <button id="targetModeButton" class="${g}__button">
                <spark-scan-view-icon
                  icon="aimer"
                  fill="${this[E]?this.computedStyle.getPropertyValue(V):this.computedStyle.getPropertyValue(A)}"
                  size="24"
                ></spark-scan-view-icon>
              </button>
            `:""}
        ${this[z]?u`
              <button id="scanningBehaviorButton" class="${g}__button">
                <spark-scan-view-icon
                  icon="continuous"
                  fill="${this[B]==="continuous"?this.computedStyle.getPropertyValue(V):this.computedStyle.getPropertyValue(A)}"
                  size="32"
                ></spark-scan-view-icon>
              </button>
            `:""}
        ${this[F]?u`
              <button id="torchButton" class="${g}__button">
                <spark-scan-view-icon
                  icon="${this[M]?"torchOn":"torchOff"}"
                  fill="${this[M]?this.computedStyle.getPropertyValue(V):this.computedStyle.getPropertyValue(A)}"
                  size="${this[M]?"16":"18"}"
                ></spark-scan-view-icon>
              </button>
            `:""}
        ${this[N]?u`
              <button id="soundModeButton" class="${g}__button">
                <spark-scan-view-icon
                  icon="${this[T]?"soundOn":"soundOff"}"
                  fill="${this[T]?this.computedStyle.getPropertyValue(V):this.computedStyle.getPropertyValue(A)}"
                  size="32"
                ></spark-scan-view-icon>
              </button>
            `:""}
        ${this[H]?u`
              <button id="hapticModeButton" class="${g}__button">
                <spark-scan-view-icon
                  icon="${this[w]?"hapticOn":"hapticOff"}"
                  fill="${this[w]?this.computedStyle.getPropertyValue(V):this.computedStyle.getPropertyValue(A)}"
                  fill="${this[w]?28:14}"
                ></spark-scan-view-icon>
              </button>
            `:""}
        ${this[$]?u`
              <button id="handModeButton" class="${g}__button">
                <spark-scan-view-icon
                  icon="hand"
                  fill="${this[h]==="left"?this.computedStyle.getPropertyValue(V):this.computedStyle.getPropertyValue(A)}"
                  size="22"
                ></spark-scan-view-icon>
              </button>
            `:""}
      </div>

      <style>
        .${g} {
          display: flex;
          flex-flow: column;
          justify-content: ${this.visibleButtonCount>3?"flex-start":"space-evenly"};
          align-items: center;
          overflow-y: scroll;
          box-sizing: border-box;
          width: ${64}px;
          height: 220px;
          padding: 16px 0;
          background: var(${St});
          gap: 8px;
          -ms-overflow-style: none;
          scrollbar-width: none;
          -webkit-overflow-scrolling: touch;
          overscroll-behavior: contain;
        }

        .${g}::-webkit-scrollbar {
          display: none;
        }

        ${g}:not([${h}]) .${g},
        ${g}[${h}="${"right"}"] .${g} {
          border-top-left-radius: 16px;
          border-bottom-left-radius: 16px;
        }

        ${g}[${h}="${"left"}"] .${g} {
          border-top-right-radius: 16px;
          border-bottom-right-radius: 16px;
        }

        .${g}__button {
          display: flex;
          justify-content: center;
          align-items: center;
          width: 48px;
          height: 48px;
          padding: 16px;
          border: none;
          background: none;
          cursor: pointer;
        }
      </style>
    `,this.targetModeButton=this.querySelector("#targetModeButton"),(t=this.targetModeButton)==null||t.addEventListener("pointerup",this.targetModeButtonTapListener),this.targetModeButtonIcon=(i=this.targetModeButton)==null?void 0:i.querySelector(S),this.scanningBehaviorButton=this.querySelector("#scanningBehaviorButton"),(n=this.scanningBehaviorButton)==null||n.addEventListener("pointerup",this.scanningBehaviorButtonTapListener),this.scanningBehaviorButtonIcon=(a=this.scanningBehaviorButton)==null?void 0:a.querySelector(S),this.torchButton=this.querySelector("#torchButton"),(o=this.torchButton)==null||o.addEventListener("pointerup",this.torchButtonTapListener),this.torchButtonIcon=(f=this.torchButton)==null?void 0:f.querySelector(S),this.soundModeButton=this.querySelector("#soundModeButton"),(Dt=this.soundModeButton)==null||Dt.addEventListener("pointerup",this.soundModeButtonTapListener),this.soundModeButtonIcon=(It=this.soundModeButton)==null?void 0:It.querySelector(S),this.hapticModeButton=this.querySelector("#hapticModeButton"),($t=this.hapticModeButton)==null||$t.addEventListener("pointerup",this.hapticModeButtonTapListener),this.hapticModeButtonIcon=(Ht=this.hapticModeButton)==null?void 0:Ht.querySelector(S),this.handModeButton=this.querySelector("#handModeButton"),(zt=this.handModeButton)==null||zt.addEventListener("pointerup",this.handModeButtonTapListener),this.handModeButtonIcon=(Nt=this.handModeButton)==null?void 0:Nt.querySelector(S);}connectedCallback(){this[O]=!0,this[F]=!0,this[T]=!0,this[w]=!0,this.render();}disconnectedCallback(){var t,i,n,a,o,f;(t=this.targetModeButton)==null||t.removeEventListener("pointerup",this.targetModeButtonTapListener),(i=this.scanningBehaviorButton)==null||i.removeEventListener("pointerup",this.scanningBehaviorButtonTapListener),(n=this.torchButton)==null||n.removeEventListener("pointerup",this.torchButtonTapListener),(a=this.soundModeButton)==null||a.removeEventListener("pointerup",this.soundModeButtonTapListener),(o=this.hapticModeButton)==null||o.removeEventListener("pointerup",this.hapticModeButtonTapListener),(f=this.handModeButton)==null||f.removeEventListener("pointerup",this.handModeButtonTapListener);}attributeChangedCallback(t,i,n){n!==i&&this.render();}onTargetModeButtonTap(){this[E]=!this[E],this.dispatchEvent(new CustomEvent(j,{bubbles:!0,detail:{tapped:"targetModeButton",enabled:this[E]}}));}onScanningBehaviorButtonTap(){this[B]=this[B]==="continuous"?"single":"continuous",this.dispatchEvent(new CustomEvent(j,{bubbles:!0,detail:{tapped:"scanningBehaviorButton",enabled:this[B]==="continuous"}}));}onTorchButtonTap(){this[M]=!this[M],this.dispatchEvent(new CustomEvent(j,{bubbles:!0,detail:{tapped:"torchButton",enabled:this[M]}}));}onSoundModeButtonTap(){this[T]=!this[T],this.dispatchEvent(new CustomEvent(j,{bubbles:!0,detail:{tapped:"soundModeButton",enabled:this[T]}}));}onHapticModeButtonTap(){this[w]=!this[w],this.dispatchEvent(new CustomEvent(j,{bubbles:!0,detail:{tapped:"hapticModeButton",enabled:this[w]}}));}onHandModeButtonTap(){this[h]=this[h]==="left"?"right":"left",this.dispatchEvent(new CustomEvent(j,{bubbles:!0,detail:{tapped:"handModeButton",enabled:this[h]==="left"}}));}};Vt.observedAttributes=[O,z,F,N,H,$];var Mt=Vt;var le=100,ue="forwards",et=class extends HTMLElement{constructor(){super(...arguments);this.fadeOutAnimationFinishListener=this.onFadeOutAnimationFinish.bind(this);this.pointerDownListener=this.onPointerDown.bind(this);}get message(){var t;return (t=this.getAttribute("message"))!=null?t:""}set message(t){this.setAttribute("message",t);}get active(){return this.hasAttribute("active")}set active(t){this.toggleAttribute("active",t);}static create(){return m({[d]:this,[S]:x,[g]:Mt}),document.createElement(d)}render(){this.innerHTML=u`
      <spark-scan-view-sidebar></spark-scan-view-sidebar>
      <div class="${d}">
        <spark-scan-view-icon
          class="${d}__handle ${d}__handle--top"
          icon="handle"
          inline-style="fill: var(${Y})"
          size="14"
        ></spark-scan-view-icon>
        <p id="messageElement">${this.message}</p>
        <spark-scan-view-icon
          class="${d}__handle ${d}__handle--bottom"
          icon="handle"
          inline-style="fill: var(${Y})"
          size="14"
        ></spark-scan-view-icon>
      </div>

      <style>
        ${d} {
          display: flex;
          -webkit-user-select: none;
          -ms-user-select: none;
          user-select: none;
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: transparent;
        }

        ${d} #messageElement {
          width: 68%;
          margin: 0 auto;
          color: var(${Y});
        }

        .${d} {
          position: relative;
          display: flex;
          justify-content: center;
          align-items: center;
          width: 80dvw;
          height: 220px;
          max-width: calc(320px - ${64}px);
          background: var(${Q});
          color: white;
          font-family: sans-serif;
          font-size: 20px;
          font-weight: 400;
          line-height: 24px;
          text-align: center;
          text-transform: uppercase;
          cursor: pointer;
          user-select: none;
        }

        ${d}[active] .${d} {
          background: var(${gt});
        }

        .${d}__handle {
          position: absolute;
          display: flex;
          width: 14px;
          height: 6px;
        }

        ${d}:not([${v}])
          .${d}__handle {
          right: 12px;
        }

        ${d}[${v}]
          .${d}__handle {
          left: 12px;
        }

        .${d}__handle--top {
          top: 8px;
        }

        .${d}__handle--bottom {
          bottom: 8px;
        }
      </style>
    `,this.messageElement=this.querySelector("#messageElement");}onFadeOutAnimationFinish(){this.messageElement&&(this.fadeInAnimation=new Animation(new KeyframeEffect(this.messageElement,[{opacity:0},{opacity:1}],{duration:le,fill:ue})),this.messageElement.textContent=this.message,this.fadeInAnimation.play());}onPointerDown(t){this.sidebar&&!t.composedPath().includes(this.sidebar)&&this.dispatchEvent(new CustomEvent(Kt,{bubbles:!0,detail:{clientX:t.clientX,clientY:t.clientY}}));}connectedCallback(){this.render(),this.sidebar=this.querySelector("spark-scan-view-sidebar"),this.addEventListener("pointerdown",this.pointerDownListener);}disconnectedCallback(){var t,i,n;(t=this.fadeOutAnimation)==null||t.removeEventListener("finish",this.fadeOutAnimationFinishListener),(i=this.fadeOutAnimation)==null||i.cancel(),(n=this.fadeInAnimation)==null||n.cancel(),this.removeEventListener("pointerdown",this.pointerDownListener);}attributeChangedCallback(){this.messageElement&&(this.fadeOutAnimation=new Animation(new KeyframeEffect(this.messageElement,[{opacity:1},{opacity:0}],{duration:le,fill:ue})),this.fadeOutAnimation.addEventListener("finish",this.fadeOutAnimationFinishListener,{once:!0}),this.fadeOutAnimation.play());}};et.observedAttributes=["message"];function it(r,...e){let t=document.createElement("style");return t.innerHTML=r.reduce((i,n,a)=>{var f;let o=(f=e.at(a))!=null?f:"";return i+n+String(o)},""),t}var yt=class r extends HTMLElement{constructor(){super(...arguments);this.expandedTriggerButton=et.create();this.collapsedTriggerButton=mt.create();this.styleElement=it`
    ${b} ${y} {
      transform: translateY(calc(110px - 42px));
    }

    ${b}:not([expanded]) ${y} {
      display: flex;
    }

    ${b}:not([expanded]) ${d} {
      display: none;
    }

    ${b}[expanded] ${y} {
      display: none;
    }

    ${b}[expanded] ${d} {
      display: flex;
    }

    ${b}[rounded] ${d} .${d} {
      border-top-left-radius: 16px;
      border-bottom-left-radius: 16px;
    }

    ${b}[rounded] ${d} ${g} {
      display: none;
    }

    ${b}[${v}] ${y} {
      transform: translateY(calc(110px - 42px)) scaleX(-1);
    }

    ${b}[${v}] ${d} {
      flex-flow: row-reverse;
    }
  `;}get expanded(){return this.hasAttribute("expanded")}set expanded(t){this.toggleAttribute("expanded",t);}get rounded(){return this.hasAttribute("rounded")}set rounded(t){this.toggleAttribute("rounded",t);}get[v](){return this.hasAttribute(v)&&this.expandedTriggerButton.hasAttribute(v)}set[v](t){var i;this.toggleAttribute(v,t),this.expandedTriggerButton.toggleAttribute(v,t),(i=this.expandedTriggerButton.sidebar)==null||i.setAttribute(h,t?"left":"right");}get message(){return this.expandedTriggerButton.message}set message(t){this.expandedTriggerButton.message=t;}static create(){return m({[b]:r,[y]:mt,[d]:et}),document.createElement(b)}connectedCallback(){this.append(this.collapsedTriggerButton,this.expandedTriggerButton,this.styleElement),this.sidebar=this.expandedTriggerButton.sidebar;}};var Ct=class extends HTMLElement{constructor(){super(...arguments);this.styleElement=it`
    ${K} {
      position: fixed;
      top: 0;
      left: 0;
      width: 100dvw;
      height: 100dvh;
      pointer-events: none;
      user-select: none;
      opacity: 0;
    }

    ${K}[success] {
      background: var(${tt});
    }

    ${K}[error] {
      background: var(${bt});
    }
  `;}get success(){return this.hasAttribute("success")}set success(t){this.toggleAttribute("error",!t),this.toggleAttribute("success",t);}get error(){return this.hasAttribute("error")}set error(t){this.toggleAttribute("error",t),this.toggleAttribute("success",!t);}static create(){return m({[K]:this}),document.createElement(K)}async fadeIn(t,i){await this.animate([{opacity:"0"},{opacity:t}],{duration:i,easing:"linear"}).finished;}async fadeOut(t,i){await this.animate([{opacity:t},{opacity:"0"}],{duration:i,easing:"linear"}).finished;}async emitSuccessFeedback(){this.success=!0,await this.fadeIn("1",200),await this.fadeOut("1",0);}async emitErrorFeedback(){this.error=!0,await this.fadeIn("1",100),await this.fadeOut("1",100),await this.fadeIn("0.5",100),await this.fadeOut("0.5",0);}connectedCallback(){this.append(this.styleElement);}};var Pt=class r extends HTMLElement{constructor(){super(...arguments);this.targetModeButtonVisible=!0;this.scanningBehaviorButtonVisible=!1;this.torchButtonVisible=!0;this.soundModeButtonVisible=!1;this.hapticModeButtonVisible=!1;this.handModeButtonVisible=!1;this.zoomSwitchControlVisible=!0;this.previewSizeControlVisible=!0;this.feedbackDelegate={getFeedbackForBarcode:()=>I.success()};this.miniPreview=dt.create();this.triggerButton=yt.create();this.visualFeedback=Ct.create();this.styleElement=it`
    ${l} {
      z-index: 10;
    }

    ${b} {
      position: fixed;
      top: 0;
      transform: translateY(${window.innerHeight/2}px);
      z-index: 10;
    }

    ${b}[bouncing] {
      transition: 0.5s cubic-bezier(0.47, 1.24, 0.51, 1);
    }

    ${lt}:not([${h}]) ${b},
    ${lt}[${h}="${"right"}"] ${b} {
      right: 0;
    }

    ${lt}[${h}="${"left"}"] ${b} {
      left: 0;
    }

    :root {
      ${Q}: #12161999;
      ${gt}: #12161966;
      ${Y}: #FFFFFF;
      ${St}: #121619CC;
      ${V}: #FBC02C;
      ${A}: #FFFFFF;
      ${tt}: #2EC1CE;
      ${bt}: #FA4446;
    }
  `;this.miniPreviewTimeout=new k(500,this.onMiniPreviewTimeoutFinished.bind(this));this.triggerButtonRepositioningTimeout=new k(500,this.onTriggerButtonRepositioningTimeoutFinished.bind(this));this.triggerButtonTranslateY=window.innerHeight/2;this.triggerButtonTranslateYOffset=0;this.orientationManager=new vt;this.miniPreviewButtonTapListener=this.onMiniPreviewButtonTap.bind(this);this.miniPreviewSwipeUpListener=this.onMiniPreviewSwipeUp.bind(this);this.miniPreviewSwipeDownListener=this.onMiniPreviewSwipeDown.bind(this);this.triggerButtonTapListener=this.onTriggerButtonTap.bind(this);this.triggerButtonHoldStartListener=this.onTriggerButtonHoldStart.bind(this);this.triggerButtonHoldEndListener=this.onTriggerButtonHoldEnd.bind(this);this.triggerButtonVerticalSwipeStartListener=this.onTriggerButtonVerticalSwipeStart.bind(this);this.triggerButtonVerticalSwipeListener=this.onTriggerButtonVerticalSwipe.bind(this);this.triggerButtonVerticalSwipeEndListener=this.onTriggerButtonVerticalSwipeEnd.bind(this);this.triggerButtonSwipeLeftListener=this.onTriggerButtonSwipeLeft.bind(this);this.triggerButtonSwipeRightListener=this.onTriggerButtonSwipeRight.bind(this);this.sidebarButtonTapListener=this.onSidebarButtonTap.bind(this);this.clickOutsideListener=this.onClickOutside.bind(this);this.visibilityChangeListener=this.onVisibilityChange.bind(this);this.orientationChangeListener=this.onOrientationChange.bind(this);this.swipingVertically=!1;}get[h](){var t;return (t=this.getAttribute(h))!=null?t:"right"}set[h](t){this.setAttribute(h,t);}get _startCapturingText(){return this.startCapturingText!=null?this.startCapturingText:this.settings.holdToScanEnabled?"Tap or hold to scan":"Tap to scan"}get _resumeCapturingText(){var t;return (t=this.resumeCapturingText)!=null?t:"Resume scanning"}get _scanningCapturingText(){return this.scanningCapturingText!=null?this.scanningCapturingText:this.settings.holdToScanEnabled?"Hold to scan continuously":"Scanning"}get _stopCapturingText(){return this.stopCapturingText!=null?this.stopCapturingText:this.settings.holdToScanEnabled?"Release to stop scanning":"Stop scanning"}get _targetModeEnabledMessage(){var t;return (t=this.settings.toastSettings.targetModeEnabledMessage)!=null?t:"Aimer on"}get _targetModeDisabledMessage(){var t;return (t=this.settings.toastSettings.targetModeDisabledMessage)!=null?t:"Aimer off"}get _continuousModeEnabledMessage(){var t;return (t=this.settings.toastSettings.continuousModeEnabledMessage)!=null?t:"Continuous mode on"}get _continuousModeDisabledMessage(){var t;return (t=this.settings.toastSettings.continuousModeDisabledMessage)!=null?t:"Continuous mode off"}get _scanPausedMessage(){var t;return (t=this.settings.toastSettings.scanPausedMessage)!=null?t:"Scan paused"}get _torchEnabledMessage(){var t;return (t=this.settings.toastSettings.torchEnabledMessage)!=null?t:"Torch on"}get _torchDisabledMessage(){var t;return (t=this.settings.toastSettings.torchDisabledMessage)!=null?t:"Torch off"}get _zoomedInMessage(){var t;return (t=this.settings.toastSettings.zoomedInMessage)!=null?t:"2x zoom"}get _zoomedOutMessage(){var t;return (t=this.settings.toastSettings.zoomedOutMessage)!=null?t:"1x zoom"}static forElement(t,i,n,a){let o=r.create();return o.presenter=Tt.forView(o,i,n,a!=null?a:new ht),o.settings=o.presenter.sparkScanViewSettings,o.append(o.miniPreview,o.triggerButton,o.visualFeedback,o.styleElement),o.setTranslateYForOrientation(o.orientationManager.orientation),o.hidden=!0,t.append(o),o}static create(){return m({[lt]:r}),document.createElement("spark-scan-view")}async prepareScanning(){this.mount(),this.hidden=!1,await this.presenter.prepareScanning(this.miniPreview.host);}async startScanning(){await this.presenter.startScanning();}async pauseScanning(){await this.presenter.pauseScanning();}async stopScanning(){await this.presenter.stopScanning();}showToast(t){this.miniPreview.showToast("info",t,1e3);}async emitFeedback(t){Logger.log(Logger.Level.Debug,"DEPRECATED: SparkScanView.emitFeedback is deprecated, use SparkScanView.feedbackDelegate instead");}mount(){this.unmount(),this.miniPreview[J]=this.previewSizeControlVisible,this.miniPreview[R]=this.zoomSwitchControlVisible,this.triggerButton.sidebar&&(this.triggerButton.sidebar[O]=this.targetModeButtonVisible,this.triggerButton.sidebar[z]=this.scanningBehaviorButtonVisible,this.triggerButton.sidebar[N]=this.soundModeButtonVisible,this.triggerButton.sidebar[H]=BrowserHelper.isVibrationAvailable()&&this.hapticModeButtonVisible,this.triggerButton.sidebar[$]=this.handModeButtonVisible,this.triggerButton.rounded=this.triggerButton.sidebar.allButtonsHidden),this.captureButtonBackgroundColor&&this.style.setProperty(Q,`#${this.captureButtonBackgroundColor.toJSON()}`),this.captureButtonActiveBackgroundColor&&this.style.setProperty(gt,`#${this.captureButtonActiveBackgroundColor.toJSON()}`),this.captureButtonTintColor&&this.style.setProperty(Y,`#${this.captureButtonTintColor.toJSON()}`),this.toolbarBackgroundColor&&this.style.setProperty(St,`#${this.toolbarBackgroundColor.toJSON()}`),this.toolbarIconActiveTintColor&&this.style.setProperty(V,`#${this.toolbarIconActiveTintColor.toJSON()}`),this.toolbarIconInactiveTintColor&&this.style.setProperty(A,`#${this.toolbarIconInactiveTintColor.toJSON()}`),this.miniPreview.addEventListener("minipreviewbuttontap",this.miniPreviewButtonTapListener),this.miniPreview.addEventListener("minipreviewswipeup",this.miniPreviewSwipeUpListener),this.miniPreview.addEventListener("minipreviewswipedown",this.miniPreviewSwipeDownListener),this.triggerButton.addEventListener("tap",this.triggerButtonTapListener),this.triggerButton.addEventListener("holdstart",this.triggerButtonHoldStartListener),this.triggerButton.addEventListener("holdend",this.triggerButtonHoldEndListener),this.triggerButton.addEventListener("swipeupstart",this.triggerButtonVerticalSwipeStartListener),this.triggerButton.addEventListener("swipedownstart",this.triggerButtonVerticalSwipeStartListener),this.triggerButton.addEventListener("swipeup",this.triggerButtonVerticalSwipeListener),this.triggerButton.addEventListener("swipedown",this.triggerButtonVerticalSwipeListener),this.triggerButton.addEventListener("swipeupend",this.triggerButtonVerticalSwipeEndListener),this.triggerButton.addEventListener("swipedownend",this.triggerButtonVerticalSwipeEndListener),this.triggerButton.addEventListener("swipeleft",this.triggerButtonSwipeLeftListener),this.triggerButton.addEventListener("swiperight",this.triggerButtonSwipeRightListener),this.triggerButton.addEventListener("sidebarbuttontap",this.sidebarButtonTapListener),this.gestureManager=At.forElement(this.triggerButton,this.settings.holdToScanEnabled),this.gestureManager.connect(),this.orientationManager.connectedCallback(),this.orientationManager.addEventListener("orientationchange",this.orientationChangeListener),this.orientationManager.dispatchOrientationChangeEvent(this.orientationManager.orientation),document.addEventListener("pointerup",this.clickOutsideListener),document.addEventListener("visibilitychange",this.visibilityChangeListener);}unmount(){var t;this.miniPreview.removeEventListener("minipreviewbuttontap",this.miniPreviewButtonTapListener),this.miniPreview.removeEventListener("minipreviewswipeup",this.miniPreviewSwipeUpListener),this.miniPreview.removeEventListener("minipreviewswipedown",this.miniPreviewSwipeDownListener),(t=this.gestureManager)==null||t.disconnect(),this.triggerButton.removeEventListener("tap",this.triggerButtonTapListener),this.triggerButton.removeEventListener("holdstart",this.triggerButtonHoldStartListener),this.triggerButton.removeEventListener("holdend",this.triggerButtonHoldEndListener),this.triggerButton.removeEventListener("swipeupstart",this.triggerButtonVerticalSwipeStartListener),this.triggerButton.removeEventListener("swipedownstart",this.triggerButtonVerticalSwipeStartListener),this.triggerButton.removeEventListener("swipeup",this.triggerButtonVerticalSwipeListener),this.triggerButton.removeEventListener("swipedown",this.triggerButtonVerticalSwipeListener),this.triggerButton.removeEventListener("swipeupend",this.triggerButtonVerticalSwipeEndListener),this.triggerButton.removeEventListener("swipedownend",this.triggerButtonVerticalSwipeEndListener),this.triggerButton.removeEventListener("swipeleft",this.triggerButtonSwipeLeftListener),this.triggerButton.removeEventListener("swiperight",this.triggerButtonSwipeRightListener),this.triggerButton.removeEventListener("sidebarbuttontap",this.sidebarButtonTapListener),this.orientationManager.disconnectedCallback(),this.orientationManager.removeEventListener("orientationchange",this.orientationChangeListener),document.removeEventListener("pointerup",this.clickOutsideListener),document.removeEventListener("visibilitychange",this.visibilityChangeListener),this.miniPreviewTimeout.stop(),this.triggerButtonRepositioningTimeout.stop();}connectedCallback(){this.mount();}disconnectedCallback(){this.unmount();}setTorchAvailable(t){this.triggerButton.sidebar&&(this.triggerButton.sidebar[F]=t);}switchToIdleState(){this.miniPreview.darkened=!1,this.miniPreview.visible=!1,this.triggerButton.expanded=!1,this.triggerButton.message="";}async switchToActiveState(t,i,n){this.miniPreviewTimeout.stop(),this.miniPreview.hideToast(),this.miniPreview.cancelFadeOut(),this.miniPreview.darkened=!1,this.miniPreview.visible=!0,this.triggerButton.expanded=!0,this.triggerButton.message=i==="continuous"?this._stopCapturingText:this._scanningCapturingText,this.triggerButton.expandedTriggerButton.active=!0,this.triggerButton.sidebar&&(this.triggerButton.sidebar[B]=i),t&&(n&&this.style.setProperty(tt,`#${n.toJSON()}`),await this.visualFeedback.emitSuccessFeedback()),await this.positionTriggerButtonBasedOnAvailableSpace();}async switchToInactiveState(t,i,n,a){this.miniPreview.darkened=t||n==="persistent",this.miniPreview.visible=t||n==="persistent",this.triggerButton.expanded=!0,this.triggerButton.message=this._startCapturingText,this.triggerButton.expandedTriggerButton.active=!1,this.triggerButton.sidebar&&(this.triggerButton.sidebar[B]=i),t&&(a&&this.style.setProperty(tt,`#${a.toJSON()}`),await this.visualFeedback.emitSuccessFeedback(),n==="default"&&this.miniPreviewTimeout.start()),n==="persistent"&&this.miniPreview.showToast("warning",this._scanPausedMessage,Number.POSITIVE_INFINITY),await this.positionTriggerButtonBasedOnAvailableSpace();}async switchToErrorState(t,i){t.resumeCapturingDelay>0&&(this.miniPreview.showToast("error",t.message,t.resumeCapturingDelay),this.triggerButton.message=this._resumeCapturingText),i&&(this.style.setProperty(bt,`#${t.visualFeedbackColor.toJSON()}`),await this.visualFeedback.emitErrorFeedback());}setTriggerButtonTranslateY(t){this.triggerButtonTranslateY=t,this.triggerButton.style.transform=`translateY(${this.triggerButtonTranslateY}px)`;}async bounceTriggerButtonTranslateY(t){return new Promise(i=>{this.triggerButton.toggleAttribute("bouncing",!0),this.triggerButton.addEventListener("transitionend",()=>{this.triggerButton.toggleAttribute("bouncing",!1),i();},{once:!0}),this.setTriggerButtonTranslateY(t);})}setTranslateYForOrientation(t){switch(t){case"landscape-primary":case"landscape-secondary":{this.setTriggerButtonTranslateY(this.presenter.landscapeOrientationTriggerButtonTranslateY);break}case"portrait-primary":case"portrait-secondary":this.setTriggerButtonTranslateY(this.presenter.portraitOrientationTriggerButtonTranslateY);}}async onMiniPreviewButtonTap(t){t.detail.tapped==="resizeButton"&&this.isTriggerButtonOverlappingMiniPreview()?(await this.bounceTriggerButtonTranslateY(this.miniPreview.clientHeight+32),this.presenter.onMiniPreviewResizeButtonTap()):t.detail.tapped==="zoomButton"&&await this.presenter.onMiniPreviewZoomButtonTap(t.detail.zoomFactor),this.miniPreviewTimeout.running&&this.miniPreviewTimeout.start();}async onMiniPreviewSwipeUp(){this.miniPreviewTimeout.running||await this.presenter.onMiniPreviewSwipeUp();}async onMiniPreviewSwipeDown(){this.miniPreviewTimeout.running||await this.presenter.onMiniPreviewSwipeDown();}async onTriggerButtonTap(){await this.presenter.onTriggerButtonTap();}async onTriggerButtonHoldStart(){await this.presenter.onTriggerButtonHoldStart();}async onTriggerButtonHoldEnd(){await this.presenter.onTriggerButtonHoldEnd();}onTriggerButtonVerticalSwipeStart(t){this.swipingVertically=!0,this.triggerButtonTranslateYOffset=this.triggerButtonTranslateY-t.detail.y;}onTriggerButtonVerticalSwipe(t){this.setTriggerButtonTranslateY(this.triggerButtonTranslateYOffset+t.detail.y);}async onTriggerButtonVerticalSwipeEnd(){if(this.swipingVertically=!1,this.isTriggerButtonOverlappingMiniPreview())await this.bounceTriggerButtonTranslateY(this.miniPreview.clientHeight+32);else if(this.isTriggerButtonAboveScreenStart()){let t=this.triggerButton.expanded?16:-68;await this.bounceTriggerButtonTranslateY(t);}else if(this.isTriggerButtonBelowScreenEnd()){let t=this.triggerButton.expanded?window.innerHeight-220-16:window.innerHeight-42-110;await this.bounceTriggerButtonTranslateY(t);}this.presenter.onTriggerButtonVerticalSwipeEnd(this.triggerButtonTranslateY,this.orientationManager.orientation);}async onTriggerButtonSwipeLeft(){this.swipingVertically||await this.presenter.onTriggerButtonSwipeLeft();}async onTriggerButtonSwipeRight(){this.swipingVertically||await this.presenter.onTriggerButtonSwipeRight();}async onSidebarButtonTap(t){switch(this.miniPreview.rewindAnimation(),t.detail.tapped){case"targetModeButton":{await this.onTargetModeButtonTap(t);return}case"scanningBehaviorButton":{await this.onScanningBehaviorButtonTap(t);return}case"torchButton":{await this.onTorchButtonTap(t);return}case"soundModeButton":{this.onSoundModeButtonTap(t);return}case"hapticModeButton":{this.onHapticModeButtonTap(t);return}case"handModeButton":this.onHandModeButtonTap(t);}}async onClickOutside(t){t.composedPath().includes(this)||await this.presenter.onClickOutside();}async onVisibilityChange(){document.visibilityState==="hidden"&&await this.presenter.onVisibilityChange();}async onTargetModeButtonTap(t){await this.presenter.onTargetModeButtonTap(t.detail.enabled);}async onScanningBehaviorButtonTap(t){await this.presenter.onScanningBehaviorButtonTap(t.detail.enabled);}async onTorchButtonTap(t){await this.presenter.onTorchButtonTap(t.detail.enabled);}onSoundModeButtonTap(t){this.presenter.onSoundModeButtonTap(t.detail.enabled);}onHapticModeButtonTap(t){this.presenter.onHapticModeButtonTap(t.detail.enabled);}onHandModeButtonTap(t){this.presenter.onHandModeButtonTap(t.detail.enabled);}async onMiniPreviewTimeoutFinished(){this.miniPreview.visible=await this.miniPreview.fadeOut();}async onTriggerButtonRepositioningTimeoutFinished(){await this.positionTriggerButtonBasedOnAvailableSpace();}async onOrientationChange(t){this.triggerButtonRepositioningTimeout.stop();let i=t;this.miniPreview.orientation=i.detail,this.triggerButtonRepositioningTimeout.start(),this[h]=(()=>{switch(i.detail){case"landscape-primary":return "right";case"landscape-secondary":return "left";default:return this.presenter.handMode}})(),this.triggerButton[v]=this[h]==="left",this.setTranslateYForOrientation(i.detail);}targetModeButtonTapped(t,i,n=!0){var a;if(n){let o=t?"warning":"info",f=t?this._targetModeEnabledMessage:this._targetModeDisabledMessage;this.miniPreview.showToast(o,f,1e3);}this.triggerButton.sidebar&&(this.triggerButton.sidebar[E]=t),this.miniPreviewTimeout.running&&this.miniPreviewTimeout.start(),(a=this.didChangeScanningMode)==null||a.call(this,i);}scanningBehaviorButtonTapped(t,i=!0){if(i){let n=t?"warning":"info",a=t?this._continuousModeEnabledMessage:this._continuousModeDisabledMessage;this.miniPreview.showToast(n,a,1e3);}this.triggerButton.sidebar&&(this.triggerButton.sidebar[B]=t?"continuous":"single"),this.miniPreviewTimeout.running&&this.miniPreviewTimeout.start();}torchButtonTapped(t,i=!0){if(i){let n=t?"warning":"info",a=t?this._torchEnabledMessage:this._torchDisabledMessage;this.miniPreview.showToast(n,a,1e3);}this.triggerButton.sidebar&&(this.triggerButton.sidebar[M]=t),this.miniPreviewTimeout.running&&this.miniPreviewTimeout.start();}soundModeButtonTapped(t){this.triggerButton.sidebar&&(this.triggerButton.sidebar[T]=t),this.miniPreviewTimeout.running&&this.miniPreviewTimeout.start();}hapticModeButtonTapped(t){this.triggerButton.sidebar&&(this.triggerButton.sidebar[w]=t),this.miniPreviewTimeout.running&&this.miniPreviewTimeout.start();}handModeButtonTapped(t){this[h]=t?"left":"right",this.triggerButton[v]=t,this.triggerButton.sidebar&&(this.triggerButton.sidebar[h]=t?"left":"right"),this.miniPreviewTimeout.running&&this.miniPreviewTimeout.start();}miniPreviewSwipedUp(){this.miniPreview.zoomIn();}miniPreviewSwipedDown(){this.miniPreview.zoomOut();}isTriggerButtonOverlappingMiniPreview(){return this.orientationManager.orientation.startsWith("portrait")&&this.miniPreview.visible&&this.triggerButtonTranslateY<this.miniPreview.clientHeight+32}isTriggerButtonAboveScreenStart(){return this.triggerButton.expanded?this.triggerButtonTranslateY<0:this.triggerButtonTranslateY<-68}isTriggerButtonBelowScreenEnd(){return this.triggerButton.expanded?this.triggerButtonTranslateY>=window.innerHeight-220:this.triggerButtonTranslateY>window.innerHeight-42-110}async positionTriggerButtonBasedOnAvailableSpace(){this.isTriggerButtonOverlappingMiniPreview()?await this.bounceTriggerButtonTranslateY(this.miniPreview.clientHeight+32):this.isTriggerButtonAboveScreenStart()?await this.bounceTriggerButtonTranslateY(16):this.isTriggerButtonBelowScreenEnd()&&await this.bounceTriggerButtonTranslateY(window.innerHeight-220-16),this.presenter.onTriggerButtonVerticalSwipeEnd(this.triggerButtonTranslateY,this.orientationManager.orientation);}};var Ot=class{constructor(e){this.type="success";this.visualFeedbackColor=e;}toJSONObject(){var e,t;return {type:this.type,visualFeedbackColor:(t=(e=this.visualFeedbackColor)==null?void 0:e.toJSON())!=null?t:null}}},Ft=class{constructor(e,t,i){this.type="error";this.message=e,this.resumeCapturingDelay=t,this.visualFeedbackColor=i;}toJSONObject(){var e,t;return {type:this.type,message:this.message,resumeCapturingDelay:this.resumeCapturingDelay,visualFeedbackColor:(t=(e=this.visualFeedbackColor)==null?void 0:e.toJSON())!=null?t:null}}};

export { nt as SparkScan, _ as SparkScanBarcodeErrorFeedback, I as SparkScanBarcodeFeedback, q as SparkScanBarcodeSuccessFeedback, Yt as SparkScanPreviewBehavior, Ut as SparkScanScanningBehavior, at as SparkScanScanningMode, U as SparkScanScanningModeDefault, G as SparkScanScanningModeTarget, X as SparkScanSession, Et as SparkScanSettings, rt as SparkScanToastSettings, Pt as SparkScanView, Ft as SparkScanViewErrorFeedback, ht as SparkScanViewSettings, Ot as SparkScanViewSuccessFeedback };
